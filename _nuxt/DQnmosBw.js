import{_ as ee}from"./Bch17VXu.js";import{_ as te}from"./B7zsFk_Y.js";import{r as n,C as se,j as B,c as d,a as e,l as N,b as m,t as a,n as o,F as j,m as A,k as V,p as F,q as u,v as b,s as D,T as M,y as oe,o as r,x as O}from"./BAvuBg4s.js";import{B as le}from"./DDG1A78S.js";import{P as ie}from"./D4D9W4AW.js";import{T as ne}from"./CwKXUYwU.js";import{X as L}from"./BwZpcNeh.js";import{C as ae}from"./C8-FH2sY.js";import"./DlAUqK2U.js";import"./CSLnjY7V.js";import"./uoPWt5tl.js";import"./CJ2mP9ci.js";const re={class:"space-y-8"},de={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},ue={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ce={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},pe={class:"text-2xl font-display font-bold text-white"},me={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},xe={class:"text-2xl font-display font-bold text-emerald-400"},fe={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},ge={class:"text-2xl font-display font-bold text-amber-400"},ve={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},be={class:"text-2xl font-display font-bold text-indigo-400"},we={key:0,class:"text-center py-20"},ye={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},he={key:2,class:"overflow-x-auto"},Ce={class:"w-full"},ke={class:"divide-y divide-white/5"},_e={class:"p-4"},Pe={class:"text-white font-medium"},De={class:"text-slate-500 text-xs"},Te={class:"p-4"},$e={class:"flex items-center gap-2"},Se=["src","alt"],Ue={class:"text-slate-300"},Ve={class:"p-4"},Ee={class:"px-2 py-1 bg-white/5 text-slate-400 text-xs rounded-lg"},Ie={class:"p-4"},Be={class:"p-4 text-white font-medium"},Ne={class:"p-4"},je={class:"p-4"},Ae={class:"flex justify-end gap-2"},Fe=["onClick"],Me=["onClick"],Oe={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},Le={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden max-h-[90vh] overflow-y-auto"},qe={class:"flex justify-between items-center mb-6"},ze={class:"text-xl font-display font-bold text-white"},Re={class:"space-y-1"},We={class:"space-y-1"},Ge={class:"relative"},Xe=["value"],He={class:"grid grid-cols-2 gap-4"},Je={class:"space-y-1"},Ke={class:"space-y-1"},Qe={class:"grid grid-cols-2 gap-4"},Ye={class:"space-y-1"},Ze={class:"space-y-1"},et={class:"space-y-1"},tt={class:"space-y-1"},st={class:"pt-4 flex gap-3"},ot=["disabled"],lt={key:0,class:"fixed inset-0 z-[110] flex items-center justify-center px-4"},it={class:"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6"},nt={class:"flex justify-between items-center mb-6"},at={class:"space-y-1"},rt={class:"space-y-1"},dt={class:"pt-4 flex gap-3"},ut=["disabled"],_t={__name:"projects",setup(ct){const q={Basic:2999,Professional:9999,Enterprise:25e3,Custom:0},w=n([]),T=n([]),E=n(!0),f=n(!1),g=n(!1),y=n(!1),_=n(!1),P=n(!1),h=n(!1),C=n(null),k=n(null),c=n(""),p=n(""),x=n("success"),i=n({id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),v=n({name:"",email:""});se(()=>{$(),z()});const $=async()=>{try{w.value=await $fetch("/api/projects")}catch(l){console.error("Failed to fetch projects:",l)}finally{E.value=!1}},z=async()=>{try{T.value=await $fetch("/api/clients")}catch(l){console.error("Failed to fetch clients:",l)}},R=B(()=>w.value.reduce((l,t)=>l+(t.value||0),0)),S=B(()=>{const l={active:0,pending:0,completed:0};return w.value.forEach(t=>{t.status in l&&l[t.status]++}),l}),W=()=>{const l=i.value.pricingPackage;l!=="Custom"&&(i.value.value=q[l])},U=(l=null)=>{l?(y.value=!0,i.value={id:l.id,name:l.name,clientId:l.clientId,projectType:l.projectType,pricingPackage:l.pricingPackage||"Basic",value:l.value||0,status:l.status,description:l.description||"",startDate:l.startDate?new Date(l.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}):(y.value=!1,i.value={id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),f.value=!0},G=async()=>{_.value=!0;try{y.value?(await $fetch(`/api/projects/${i.value.id}`,{method:"PUT",body:i.value}),c.value="Updated",p.value="Project updated successfully."):(await $fetch("/api/projects",{method:"POST",body:i.value}),c.value="Created",p.value="Project created successfully."),x.value="success",f.value=!1,$()}catch(l){c.value="Error",p.value="Failed to save project.",x.value="error",console.error(l)}finally{_.value=!1,k.value.show()}},X=async()=>{P.value=!0;try{const l=await $fetch("/api/clients",{method:"POST",body:v.value});T.value.unshift(l),i.value.clientId=l.id,v.value={name:"",email:""},g.value=!1,c.value="Client Created",p.value=`${l.name} has been added.`,x.value="success",k.value.show()}catch(l){c.value="Error",p.value="Failed to create client.",x.value="error",console.error(l),k.value.show()}finally{P.value=!1}},H=l=>{C.value=l,h.value=!0},J=async()=>{if(C.value)try{await $fetch(`/api/projects/${C.value.id}`,{method:"DELETE"}),c.value="Deleted",p.value="Project deleted.",x.value="success",$()}catch{c.value="Error",p.value="Failed to delete project.",x.value="error"}finally{h.value=!1,C.value=null,k.value.show()}},I=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l||0),K=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown";return(l,t)=>{const Q=ee,Y=te;return r(),d("div",re,[e("div",de,[t[20]||(t[20]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Projects"),e("p",{class:"text-slate-400"},"Track and manage client projects.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>U()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + New Project ")]),e("div",ue,[e("div",ce,[t[21]||(t[21]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Total Value",-1)),e("p",pe,a(I(o(R))),1)]),e("div",me,[t[22]||(t[22]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Active",-1)),e("p",xe,a(o(S).active),1)]),e("div",fe,[t[23]||(t[23]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Pending",-1)),e("p",ge,a(o(S).pending),1)]),e("div",ve,[t[24]||(t[24]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Completed",-1)),e("p",be,a(o(S).completed),1)])]),o(E)?(r(),d("div",we,[...t[25]||(t[25]=[e("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"text-slate-500 mt-4"},"Loading projects...",-1)])])):o(w).length===0?(r(),d("div",ye,[m(o(le),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t[26]||(t[26]=e("p",{class:"text-slate-400 mb-2"},"No projects yet",-1)),e("button",{onClick:t[1]||(t[1]=s=>U()),class:"text-indigo-400 hover:text-indigo-300 text-sm font-medium"}," Create your first project ")])):(r(),d("div",he,[e("table",Ce,[t[27]||(t[27]=e("thead",null,[e("tr",{class:"text-left text-xs uppercase tracking-wider text-slate-500"},[e("th",{class:"p-4"},"Project"),e("th",{class:"p-4"},"Client"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Package"),e("th",{class:"p-4"},"Value"),e("th",{class:"p-4"},"Status"),e("th",{class:"p-4 text-right"},"Actions")])],-1)),e("tbody",ke,[(r(!0),d(j,null,A(o(w),s=>(r(),d("tr",{key:s.id,class:"hover:bg-white/5 transition-colors"},[e("td",_e,[e("p",Pe,a(s.name),1),e("p",De,a(K(s.startDate||s.createdAt)),1)]),e("td",Te,[e("div",$e,[s.clientAvatar?(r(),d("img",{key:0,src:s.clientAvatar,class:"w-6 h-6 rounded-full bg-slate-700",alt:s.clientName},null,8,Se)):V("",!0),e("span",Ue,a(s.clientName||"Unknown"),1)])]),e("td",Ve,[e("span",Ee,a(s.projectType),1)]),e("td",Ie,[e("span",{class:O(["px-2 py-1 text-xs rounded-lg",{"bg-slate-500/20 text-slate-300":s.pricingPackage==="Basic","bg-blue-500/20 text-blue-400":s.pricingPackage==="Professional","bg-purple-500/20 text-purple-400":s.pricingPackage==="Enterprise","bg-amber-500/20 text-amber-400":s.pricingPackage==="Custom"}])},a(s.pricingPackage||"Basic"),3)]),e("td",Be,a(I(s.value)),1),e("td",Ne,[e("span",{class:O(["px-2 py-1 text-xs font-medium rounded-full capitalize",{"bg-emerald-500/20 text-emerald-400":s.status==="active","bg-amber-500/20 text-amber-400":s.status==="pending","bg-indigo-500/20 text-indigo-400":s.status==="completed","bg-rose-500/20 text-rose-400":s.status==="cancelled"}])},a(s.status),3)]),e("td",je,[e("div",Ae,[e("button",{onClick:Z=>U(s),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit"},[m(o(ie),{class:"w-4 h-4"})],8,Fe),e("button",{onClick:Z=>H(s),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[m(o(ne),{class:"w-4 h-4"})],8,Me)])])]))),128))])])])),(r(),N(M,{to:"body"},[o(f)?(r(),d("div",Oe,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[2]||(t[2]=s=>f.value=!1)}),e("div",Le,[e("div",qe,[e("h3",ze,a(o(y)?"Edit Project":"Create Project"),1),e("button",{onClick:t[3]||(t[3]=s=>f.value=!1),class:"text-slate-400 hover:text-white"},[m(o(L),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:F(G,["prevent"])},[e("div",Re,[t[28]||(t[28]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Name",-1)),u(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(i).name=s),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(i).name]])]),e("div",We,[t[30]||(t[30]=e("label",{class:"text-sm font-medium text-slate-300"},"Client",-1)),e("div",Ge,[u(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(i).clientId=s),required:"",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all appearance-none cursor-pointer"},[t[29]||(t[29]=e("option",{value:"",disabled:""},"Select a client...",-1)),(r(!0),d(j,null,A(o(T),s=>(r(),d("option",{key:s.id,value:s.id},a(s.name),9,Xe))),128))],512),[[D,o(i).clientId]]),m(o(ae),{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]),e("button",{type:"button",onClick:t[6]||(t[6]=s=>g.value=!0),class:"text-xs text-indigo-400 hover:text-indigo-300 mt-1"}," + Create new client ")]),e("div",He,[e("div",Je,[t[32]||(t[32]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Type",-1)),u(e("select",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(i).projectType=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[31]||(t[31]=[e("option",null,"Web",-1),e("option",null,"Mobile",-1),e("option",null,"AI",-1),e("option",null,"DevOps",-1),e("option",null,"Consulting",-1),e("option",null,"Other",-1)])],512),[[D,o(i).projectType]])]),e("div",Ke,[t[34]||(t[34]=e("label",{class:"text-sm font-medium text-slate-300"},"Pricing Package",-1)),u(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(i).pricingPackage=s),onChange:W,class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[33]||(t[33]=[e("option",{value:"Basic"},"Basic ($2,999)",-1),e("option",{value:"Professional"},"Professional ($9,999)",-1),e("option",{value:"Enterprise"},"Enterprise ($15k-$50k)",-1),e("option",{value:"Custom"},"Custom",-1)])],544),[[D,o(i).pricingPackage]])])]),e("div",Qe,[e("div",Ye,[t[35]||(t[35]=e("label",{class:"text-sm font-medium text-slate-300"},"Value ($)",-1)),u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o(i).value=s),type:"number",min:"0",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(i).value,void 0,{number:!0}]])]),e("div",Ze,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-slate-300"},"Status",-1)),u(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o(i).status=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[36]||(t[36]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)])],512),[[D,o(i).status]])])]),e("div",et,[t[38]||(t[38]=e("label",{class:"text-sm font-medium text-slate-300"},"Start Date",-1)),u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o(i).startDate=s),type:"date",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(i).startDate]])]),e("div",tt,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-slate-300"},"Description",-1)),u(e("textarea",{"onUpdate:modelValue":t[12]||(t[12]=s=>o(i).description=s),rows:"3",placeholder:"Project details...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[b,o(i).description]])]),e("div",st,[e("button",{type:"button",onClick:t[13]||(t[13]=s=>f.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(_),class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-70"},a(o(_)?"Saving...":o(y)?"Save Changes":"Create Project"),9,ot)])],32)])])):V("",!0)])),(r(),N(M,{to:"body"},[o(g)?(r(),d("div",lt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[14]||(t[14]=s=>g.value=!1)}),e("div",it,[e("div",nt,[t[40]||(t[40]=e("h3",{class:"text-lg font-display font-bold text-white"},"Create New Client",-1)),e("button",{onClick:t[15]||(t[15]=s=>g.value=!1),class:"text-slate-400 hover:text-white"},[m(o(L),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:F(X,["prevent"])},[e("div",at,[t[41]||(t[41]=e("label",{class:"text-sm font-medium text-slate-300"},"Company Name",-1)),u(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>o(v).name=s),required:"",type:"text",placeholder:"Acme Corporation",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(v).name]])]),e("div",rt,[t[42]||(t[42]=e("label",{class:"text-sm font-medium text-slate-300"},"Contact Email",-1)),u(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>o(v).email=s),required:"",type:"email",placeholder:"contact@company.com",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[b,o(v).email]])]),e("div",dt,[e("button",{type:"button",onClick:t[18]||(t[18]=s=>g.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(P),class:"flex-1 px-4 py-2.5 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-70"},a(o(P)?"Creating...":"Create Client"),9,ut)])],32)])])):V("",!0)])),m(Q,{modelValue:o(h),"onUpdate:modelValue":t[19]||(t[19]=s=>oe(h)?h.value=s:null),title:"Delete Project",description:`Are you sure you want to delete '${o(C)?.name}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:J},null,8,["modelValue","description"]),m(Y,{ref_key:"toastRef",ref:k,title:o(c),message:o(p),type:o(x)},null,8,["title","message","type"])])}}};export{_t as default};
