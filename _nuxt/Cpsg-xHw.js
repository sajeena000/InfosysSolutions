import{_ as re}from"./BlqDiOG6.js";import{_ as de}from"./DzlxV7ns.js";import{_ as ue}from"./9SQ5mlpr.js";import{g as ce,r as i,k as pe,x as z,c as u,a as e,y as O,m as U,b as m,p as d,A as h,q as o,s as A,l as q,t as n,F as W,z as R,n as Q,v as C,T as G,o as r,B as X}from"./PsU8fGEG.js";import{u as me}from"./D_M7QkOh.js";import{B as xe}from"./B2VWVL0u.js";import{P as ge}from"./DAW6YDx9.js";import{T as ve}from"./-izbdZX4.js";import{X as H}from"./BAiJTkiT.js";import{C as fe}from"./-avDlFjS.js";import"./ZVIKdQKX.js";import"./w7z5CoPY.js";import"./DlAUqK2U.js";import"./DUIq94hi.js";import"./C0WVU3vH.js";const be={class:"space-y-8"},we={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},ye={class:"flex items-center gap-4 flex-wrap"},he={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Ce={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},ke={class:"text-2xl font-display font-bold text-white"},Pe={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},_e={class:"text-2xl font-display font-bold text-emerald-400"},De={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},Te={class:"text-2xl font-display font-bold text-amber-400"},$e={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},Se={class:"text-2xl font-display font-bold text-indigo-400"},Ve={key:0,class:"text-center py-20"},Ue={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},Ae={key:2,class:"overflow-x-auto"},Ie={class:"w-full"},Ee={class:"divide-y divide-white/5"},Be={class:"p-4"},Me={class:"text-white font-medium"},Ne={class:"text-slate-500 text-xs"},je={class:"p-4"},Oe={class:"flex items-center gap-2"},Fe=["src","alt"],Le={class:"text-slate-300"},ze={class:"p-4"},qe={class:"px-2 py-1 bg-white/5 text-slate-400 text-xs rounded-lg"},We={class:"p-4"},Re={class:"p-4 text-white font-medium"},Qe={class:"p-4"},Ge={class:"p-4"},Xe={class:"flex justify-end gap-2"},He=["onClick"],Je=["onClick"],Ke={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},Ye={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden max-h-[90vh] overflow-y-auto"},Ze={class:"flex justify-between items-center mb-6"},et={class:"text-xl font-display font-bold text-white"},tt={class:"space-y-1"},st={class:"space-y-1"},ot={class:"relative"},lt=["value"],at={class:"grid grid-cols-2 gap-4"},it={class:"space-y-1"},nt={class:"space-y-1"},rt={class:"grid grid-cols-2 gap-4"},dt={class:"space-y-1"},ut={class:"space-y-1"},ct={class:"space-y-1"},pt={class:"space-y-1"},mt={class:"pt-4 flex gap-3"},xt=["disabled"],gt={key:0,class:"fixed inset-0 z-[110] flex items-center justify-center px-4"},vt={class:"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6"},ft={class:"flex justify-between items-center mb-6"},bt={class:"space-y-1"},wt={class:"space-y-1"},yt={class:"pt-4 flex gap-3"},ht=["disabled"],jt={__name:"projects",setup(Ct){const I=ce(),{formatCurrency:F,formatDate:J}=me(),K={Basic:2999,Professional:9999,Enterprise:25e3,Custom:0},E=i([]),B=i([]),M=i(!0),g=i(!1),v=i(!1),k=i(!1),$=i(!1),S=i(!1),P=i(!1),_=i(null),D=i(null),c=i(""),p=i(""),x=i("success"),a=i({id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),f=i({name:"",email:""});pe(()=>{V(),Y()});const Y=async()=>{try{B.value=await $fetch("/api/admin/clients")}catch(l){console.error("Failed to fetch clients:",l)}},b=i(1),N=i(0),L=i(10),w=i("all"),y=i("all"),T=i({totalValue:0,active:0,pending:0,completed:0}),V=async()=>{M.value=!0;try{const l=await $fetch("/api/admin/projects",{params:{page:b.value,limit:L.value,status:w.value,type:y.value,search:I.searchQuery}});E.value=l.data,N.value=l.meta.total,l.meta.stats&&(T.value=l.meta.stats)}catch(l){console.error("Failed to fetch projects:",l)}finally{M.value=!1}};z([b,w,y,()=>I.searchQuery],()=>{V()}),z([w,y,()=>I.searchQuery],()=>{b.value=1});const Z=()=>{const l=a.value.pricingPackage;l!=="Custom"&&(a.value.value=K[l])},j=(l=null)=>{l?(k.value=!0,a.value={id:l.id,name:l.name,clientId:l.clientId,projectType:l.projectType,pricingPackage:l.pricingPackage||"Basic",value:l.value||0,status:l.status,description:l.description||"",startDate:l.startDate?new Date(l.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}):(k.value=!1,a.value={id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),g.value=!0},ee=async()=>{$.value=!0;try{k.value?(await $fetch(`/api/admin/projects/${a.value.id}`,{method:"PUT",body:a.value}),c.value="Updated",p.value="Project updated successfully."):(await $fetch("/api/admin/projects",{method:"POST",body:a.value}),c.value="Created",p.value="Project created successfully."),x.value="success",g.value=!1,V()}catch(l){c.value="Error",p.value="Failed to save project.",x.value="error",console.error(l)}finally{$.value=!1,D.value.show()}},te=async()=>{S.value=!0;try{const l=await $fetch("/api/admin/clients",{method:"POST",body:f.value});B.value.unshift(l),a.value.clientId=l.id,f.value={name:"",email:""},v.value=!1,c.value="Client Created",p.value=`${l.name} has been added.`,x.value="success",D.value.show()}catch(l){c.value="Error",p.value="Failed to create client.",x.value="error",console.error(l),D.value.show()}finally{S.value=!1}},se=l=>{_.value=l,P.value=!0},oe=async()=>{if(_.value)try{await $fetch(`/api/admin/projects/${_.value.id}`,{method:"DELETE"}),c.value="Deleted",p.value="Project deleted.",x.value="success",V()}catch{c.value="Error",p.value="Failed to delete project.",x.value="error"}finally{P.value=!1,_.value=null,D.value.show()}};return(l,t)=>{const le=re,ae=de,ie=ue;return r(),u("div",be,[e("div",we,[t[25]||(t[25]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Projects"),e("p",{class:"text-slate-400"},"Track and manage client projects.")],-1)),e("div",ye,[d(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>A(w)?w.value=s:null),class:"bg-slate-900/50 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-slate-300 focus:outline-none focus:border-indigo-500/50"},[...t[23]||(t[23]=[q('<option value="all">All Status</option><option value="pending">Pending</option><option value="active">Active</option><option value="completed">Completed</option><option value="cancelled">Cancelled</option>',5)])],512),[[h,o(w)]]),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>A(y)?y.value=s:null),class:"bg-slate-900/50 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-slate-300 focus:outline-none focus:border-indigo-500/50"},[...t[24]||(t[24]=[q('<option value="all">All Types</option><option value="Web Development">Web</option><option value="Mobile App">Mobile</option><option value="AI/ML">AI/ML</option><option value="DevOps">DevOps</option><option value="Consulting">Consulting</option>',6)])],512),[[h,o(y)]]),e("button",{onClick:t[2]||(t[2]=s=>j()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + New Project ")])]),e("div",he,[e("div",Ce,[t[26]||(t[26]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Total Value",-1)),e("p",ke,n(o(F)(o(T).totalValue)),1)]),e("div",Pe,[t[27]||(t[27]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Active",-1)),e("p",_e,n(o(T).active),1)]),e("div",De,[t[28]||(t[28]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Pending",-1)),e("p",Te,n(o(T).pending),1)]),e("div",$e,[t[29]||(t[29]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Completed",-1)),e("p",Se,n(o(T).completed),1)])]),o(M)?(r(),u("div",Ve,[...t[30]||(t[30]=[e("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"text-slate-500 mt-4"},"Loading projects...",-1)])])):o(E).length===0?(r(),u("div",Ue,[m(o(xe),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t[31]||(t[31]=e("p",{class:"text-slate-400 mb-2"},"No projects yet",-1)),e("button",{onClick:t[3]||(t[3]=s=>j()),class:"text-indigo-400 hover:text-indigo-300 text-sm font-medium"}," Create your first project ")])):(r(),u("div",Ae,[e("table",Ie,[t[32]||(t[32]=e("thead",null,[e("tr",{class:"text-left text-xs uppercase tracking-wider text-slate-500"},[e("th",{class:"p-4"},"Project"),e("th",{class:"p-4"},"Client"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Package"),e("th",{class:"p-4"},"Value"),e("th",{class:"p-4"},"Status"),e("th",{class:"p-4 text-right"},"Actions")])],-1)),e("tbody",Ee,[(r(!0),u(W,null,R(o(E),s=>(r(),u("tr",{key:s.id,class:"hover:bg-white/5 transition-colors"},[e("td",Be,[e("p",Me,n(s.name),1),e("p",Ne,n(o(J)(s.startDate||s.createdAt)),1)]),e("td",je,[e("div",Oe,[s.clientAvatar?(r(),u("img",{key:0,src:s.clientAvatar,class:"w-6 h-6 rounded-full bg-slate-700",alt:s.clientName},null,8,Fe)):U("",!0),e("span",Le,n(s.clientName||"Unknown"),1)])]),e("td",ze,[e("span",qe,n(s.projectType),1)]),e("td",We,[e("span",{class:X(["px-2 py-1 text-xs rounded-lg",{"bg-slate-500/20 text-slate-300":s.pricingPackage==="Basic","bg-blue-500/20 text-blue-400":s.pricingPackage==="Professional","bg-purple-500/20 text-purple-400":s.pricingPackage==="Enterprise","bg-amber-500/20 text-amber-400":s.pricingPackage==="Custom"}])},n(s.pricingPackage||"Basic"),3)]),e("td",Re,n(o(F)(s.value)),1),e("td",Qe,[e("span",{class:X(["px-2 py-1 text-xs font-medium rounded-full capitalize",{"bg-emerald-500/20 text-emerald-400":s.status==="active","bg-amber-500/20 text-amber-400":s.status==="pending","bg-indigo-500/20 text-indigo-400":s.status==="completed","bg-rose-500/20 text-rose-400":s.status==="cancelled"}])},n(s.status),3)]),e("td",Ge,[e("div",Xe,[e("button",{onClick:ne=>j(s),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit"},[m(o(ge),{class:"w-4 h-4"})],8,He),e("button",{onClick:ne=>se(s),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[m(o(ve),{class:"w-4 h-4"})],8,Je)])])]))),128))])])])),o(N)>0?(r(),O(le,{key:3,"current-page":o(b),"onUpdate:currentPage":t[4]||(t[4]=s=>A(b)?b.value=s:null),total:o(N),"items-per-page":o(L)},null,8,["current-page","total","items-per-page"])):U("",!0),(r(),O(G,{to:"body"},[o(g)?(r(),u("div",Ke,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[5]||(t[5]=s=>g.value=!1)}),e("div",Ye,[e("div",Ze,[e("h3",et,n(o(k)?"Edit Project":"Create Project"),1),e("button",{onClick:t[6]||(t[6]=s=>g.value=!1),class:"text-slate-400 hover:text-white"},[m(o(H),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:Q(ee,["prevent"])},[e("div",tt,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Name",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(a).name=s),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(a).name]])]),e("div",st,[t[35]||(t[35]=e("label",{class:"text-sm font-medium text-slate-300"},"Client",-1)),e("div",ot,[d(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(a).clientId=s),required:"",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all appearance-none cursor-pointer"},[t[34]||(t[34]=e("option",{value:"",disabled:""},"Select a client...",-1)),(r(!0),u(W,null,R(o(B),s=>(r(),u("option",{key:s.id,value:s.id},n(s.name),9,lt))),128))],512),[[h,o(a).clientId]]),m(o(fe),{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]),e("button",{type:"button",onClick:t[9]||(t[9]=s=>v.value=!0),class:"text-xs text-indigo-400 hover:text-indigo-300 mt-1"}," + Create new client ")]),e("div",at,[e("div",it,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Type",-1)),d(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o(a).projectType=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[36]||(t[36]=[e("option",null,"Web",-1),e("option",null,"Mobile",-1),e("option",null,"AI",-1),e("option",null,"DevOps",-1),e("option",null,"Consulting",-1),e("option",null,"Other",-1)])],512),[[h,o(a).projectType]])]),e("div",nt,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-slate-300"},"Pricing Package",-1)),d(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>o(a).pricingPackage=s),onChange:Z,class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[38]||(t[38]=[e("option",{value:"Basic"},"Basic ($2,999)",-1),e("option",{value:"Professional"},"Professional ($9,999)",-1),e("option",{value:"Enterprise"},"Enterprise ($15k-$50k)",-1),e("option",{value:"Custom"},"Custom",-1)])],544),[[h,o(a).pricingPackage]])])]),e("div",rt,[e("div",dt,[t[40]||(t[40]=e("label",{class:"text-sm font-medium text-slate-300"},"Value ($)",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o(a).value=s),type:"number",min:"0",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(a).value,void 0,{number:!0}]])]),e("div",ut,[t[42]||(t[42]=e("label",{class:"text-sm font-medium text-slate-300"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>o(a).status=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[41]||(t[41]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)])],512),[[h,o(a).status]])])]),e("div",ct,[t[43]||(t[43]=e("label",{class:"text-sm font-medium text-slate-300"},"Start Date",-1)),d(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o(a).startDate=s),type:"date",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(a).startDate]])]),e("div",pt,[t[44]||(t[44]=e("label",{class:"text-sm font-medium text-slate-300"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=s=>o(a).description=s),rows:"3",placeholder:"Project details...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[C,o(a).description]])]),e("div",mt,[e("button",{type:"button",onClick:t[16]||(t[16]=s=>g.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o($),class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-70"},n(o($)?"Saving...":o(k)?"Save Changes":"Create Project"),9,xt)])],32)])])):U("",!0)])),(r(),O(G,{to:"body"},[o(v)?(r(),u("div",gt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[17]||(t[17]=s=>v.value=!1)}),e("div",vt,[e("div",ft,[t[45]||(t[45]=e("h3",{class:"text-lg font-display font-bold text-white"},"Create New Client",-1)),e("button",{onClick:t[18]||(t[18]=s=>v.value=!1),class:"text-slate-400 hover:text-white"},[m(o(H),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:Q(te,["prevent"])},[e("div",bt,[t[46]||(t[46]=e("label",{class:"text-sm font-medium text-slate-300"},"Company Name",-1)),d(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>o(f).name=s),required:"",type:"text",placeholder:"Acme Corporation",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(f).name]])]),e("div",wt,[t[47]||(t[47]=e("label",{class:"text-sm font-medium text-slate-300"},"Contact Email",-1)),d(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>o(f).email=s),required:"",type:"email",placeholder:"contact@company.com",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(f).email]])]),e("div",yt,[e("button",{type:"button",onClick:t[21]||(t[21]=s=>v.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(S),class:"flex-1 px-4 py-2.5 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-70"},n(o(S)?"Creating...":"Create Client"),9,ht)])],32)])])):U("",!0)])),m(ae,{modelValue:o(P),"onUpdate:modelValue":t[22]||(t[22]=s=>A(P)?P.value=s:null),title:"Delete Project",description:`Are you sure you want to delete '${o(_)?.name}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:oe},null,8,["modelValue","description"]),m(ie,{ref_key:"toastRef",ref:D,title:o(c),message:o(p),type:o(x)},null,8,["title","message","type"])])}}};export{jt as default};
