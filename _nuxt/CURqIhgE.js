import{_ as H}from"./D4PP-zBt.js";import{_ as K}from"./DgxGBzps.js";import{g as Y,r as n,x as F,k as Z,c as r,a as e,y as B,m as u,b as f,p as m,F as j,z as S,A as I,q as o,s as A,l as ee,B as k,t as c,n as te,v as _,T as le,o as a}from"./JBMyD3_G.js";import{_ as oe}from"./K8_RLkd8.js";import{u as se}from"./C4rOevIF.js";import{_ as ie}from"./DlAUqK2U.js";import{P as ne}from"./B8fSKqhi.js";import{T as ae}from"./DFox_3Je.js";import{L as re}from"./C6qGjrGe.js";import{M as de}from"./sGiei8zQ.js";import{X as ue}from"./Bi7Fbwi5.js";import"./DhQvk0um.js";import"./BqYJsH3P.js";import"./DghfM413.js";import"./nkUPQgPK.js";const ce={class:"space-y-8 relative"},pe={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},me={class:"flex items-center gap-4 flex-wrap"},be={class:"hidden sm:flex p-1 bg-slate-900/50 border border-white/5 rounded-lg backdrop-blur-sm"},ve=["onClick"],fe={class:"flex sm:hidden p-1 bg-slate-900/50 border border-white/5 rounded-lg backdrop-blur-sm w-full"},ge=["onClick"],xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},he={class:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-all"},we=["onClick"],ye=["onClick"],ke={key:0,class:"absolute top-4 left-4"},_e={class:"flex items-start justify-between mb-4 mt-4"},Ue={class:"relative"},Me=["src"],Pe={class:"text-white font-medium text-lg"},Te={class:"text-indigo-400 text-sm mb-1"},Ce={class:"text-slate-500 text-xs"},De={key:1,class:"text-slate-400 text-sm mt-3 line-clamp-2"},Ve={class:"mt-6 pt-4 border-t border-white/5 flex items-center gap-3"},$e=["href"],je=["href"],Se={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},Ae={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},Ee={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden transform transition-all max-h-[90vh] overflow-y-auto"},Re={class:"relative z-10"},Fe={class:"flex justify-between items-center mb-6"},Be={class:"text-xl font-display font-bold text-white"},Ie={class:"grid grid-cols-2 gap-4"},ze={class:"space-y-1"},Le={class:"space-y-1"},Ne={class:"grid grid-cols-2 gap-4"},Oe={class:"space-y-1"},qe={class:"space-y-1"},Qe={class:"space-y-1"},Je={class:"grid grid-cols-2 gap-4"},We={class:"space-y-1"},Xe={class:"space-y-1"},Ge={class:"flex items-center justify-between p-4 bg-slate-950/50 rounded-xl border border-white/5"},He={class:"pt-4 flex gap-3"},Ke={type:"submit",class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"},Ye={__name:"team",setup(Ze){const b=Y(),{canAddMembers:z,canEditMembers:L,canRemoveMembers:N}=se(),v=n(!1),C=n(null),p=n("all"),g=n("all"),d=n("all"),U=n(!1),x=n(""),h=n(""),w=n("success"),s=n({id:null,name:"",email:"",role:"Frontend Developer",jobTitle:"",bio:"",linkedinUrl:"",imageUrl:"",isPublic:!1}),D=n([]),y=n(1),V=n(0),E=n(9),R=n(!1),M=async()=>{R.value=!0;try{const i=await $fetch("/api/admin/team",{params:{page:y.value,limit:E.value,status:p.value,role:g.value,public:d.value,search:b.searchQuery}});D.value=i.data,V.value=i.meta.total}catch(i){console.error("Failed to fetch team:",i)}finally{R.value=!1}};F([y,p,g,d,()=>b.searchQuery],()=>{M()}),F([p,g,d,()=>b.searchQuery],()=>{y.value=1}),Z(()=>{M()});const O=()=>{U.value=!1,s.value={id:null,name:"",email:"",role:"Frontend Developer",jobTitle:"",bio:"",linkedinUrl:"",imageUrl:"",isPublic:!1},v.value=!0},q=i=>{U.value=!0,s.value={id:i.id,name:i.name,email:i.email,role:i.role,jobTitle:i.jobTitle||"",bio:i.bio||"",linkedinUrl:i.linkedinUrl||"",imageUrl:i.imageUrl||"",isPublic:i.isPublic||!1},v.value=!0},Q=async()=>{try{U.value?(await b.editTeamMember(s.value),x.value="Updated",h.value="Team member details updated.",w.value="success",M()):(await b.addTeamMember({...s.value}),x.value="Success",h.value="Team member added to database.",w.value="success"),v.value=!1,M()}catch(i){x.value="Error",h.value="Failed to save changes.",w.value="error",console.error(i)}finally{C.value.show()}},P=n(!1),T=n(null),J=i=>{T.value=i,P.value=!0},W=async()=>{if(T.value)try{await b.removeTeamMember(T.value.id),x.value="Deleted",h.value="Member removed from database.",w.value="success",M()}catch{x.value="Error",h.value="Could not delete member.",w.value="error"}finally{P.value=!1,T.value=null,C.value.show()}};return(i,t)=>{const X=H,G=K;return a(),r("div",ce,[e("div",pe,[t[17]||(t[17]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Team Members"),e("p",{class:"text-slate-400"},"Manage your squad permissions and public profiles.")],-1)),e("div",me,[e("div",be,[(a(),r(j,null,S(["all","online","offline"],l=>e("button",{key:l,onClick:$=>p.value=l,class:k(["px-3 py-1.5 text-xs font-medium rounded-md capitalize transition-all",o(p)===l?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"])},c(l),11,ve)),64))]),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>A(g)?g.value=l:null),class:"bg-slate-900/50 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-slate-300 focus:outline-none focus:border-indigo-500/50"},[...t[16]||(t[16]=[ee('<option value="all" data-v-e15acbf7>All Roles</option><option value="Frontend Developer" data-v-e15acbf7>Frontend</option><option value="Backend Developer" data-v-e15acbf7>Backend</option><option value="Product Designer" data-v-e15acbf7>Designer</option><option value="DevOps Engineer" data-v-e15acbf7>DevOps</option><option value="Project Manager" data-v-e15acbf7>Manager</option><option value="Intern" data-v-e15acbf7>Intern</option>',7)])],512),[[I,o(g)]]),e("button",{onClick:t[1]||(t[1]=l=>d.value=o(d)==="all"?"true":o(d)==="true"?"false":"all"),class:k(["px-3 py-1.5 text-xs font-medium rounded-lg border transition-all",{"bg-emerald-500/20 border-emerald-500/30 text-emerald-400":o(d)==="true","bg-rose-500/20 border-rose-500/30 text-rose-400":o(d)==="false","bg-slate-900/50 border-white/5 text-slate-400":o(d)==="all"}])},c(o(d)==="true"?"Public Only":o(d)==="false"?"Private Only":"All Visibility"),3),o(z)?(a(),r("button",{key:0,onClick:O,class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + Add Member ")):u("",!0)])]),e("div",fe,[(a(),r(j,null,S(["all","online","offline"],l=>e("button",{key:l,onClick:$=>p.value=l,class:k(["flex-1 px-3 py-1.5 text-xs font-medium rounded-md capitalize transition-all",o(p)===l?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"])},c(l),11,ge)),64))]),e("div",xe,[(a(!0),r(j,null,S(o(D),l=>(a(),r("div",{key:l.id,class:"group p-6 rounded-2xl bg-slate-900/40 border border-white/5 hover:border-indigo-500/30 transition-all hover:bg-slate-800/50 relative"},[e("div",he,[o(L)?(a(),r("button",{key:0,onClick:$=>q(l),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit Member"},[f(o(ne),{class:"w-4 h-4"})],8,we)):u("",!0),o(N)?(a(),r("button",{key:1,onClick:$=>J(l),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Remove Member"},[f(o(ae),{class:"w-4 h-4"})],8,ye)):u("",!0)]),l.isPublic?(a(),r("div",ke,[...t[18]||(t[18]=[e("span",{class:"px-2 py-1 bg-emerald-500/20 text-emerald-400 text-[10px] uppercase tracking-wider rounded-full font-semibold"}," Public ",-1)])])):u("",!0),e("div",_e,[e("div",Ue,[e("img",{src:l.imageUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${l.name}`,class:"w-12 h-12 rounded-full bg-slate-800",alt:"Avatar"},null,8,Me),e("div",{class:k(["absolute -bottom-1 -right-1 w-3 h-3 border-2 border-slate-900 rounded-full",l.online?"bg-emerald-500":"bg-slate-500"])},null,2)])]),e("div",null,[e("h3",Pe,c(l.name),1),e("p",Te,c(l.jobTitle||l.role),1),e("p",Ce,c(l.email),1)]),l.bio?(a(),r("p",De,c(l.bio),1)):u("",!0),e("div",Ve,[l.linkedinUrl?(a(),r("a",{key:0,href:l.linkedinUrl,target:"_blank",class:"p-2 rounded-lg bg-white/5 hover:bg-[#0077b5]/20 text-slate-400 hover:text-[#0077b5] transition-all border border-white/5 hover:border-[#0077b5]/30 group/linkedin",title:"LinkedIn Profile"},[f(o(re),{class:"w-4 h-4"})],8,$e)):u("",!0),e("a",{href:`mailto:${l.email}`,class:"p-2 rounded-lg bg-white/5 hover:bg-emerald-500/20 text-slate-400 hover:text-emerald-400 transition-all border border-white/5 hover:border-emerald-500/30",title:"Send Email"},[f(o(de),{class:"w-4 h-4"})],8,je)])]))),128))]),o(V)>0?(a(),B(X,{key:0,"current-page":o(y),"onUpdate:currentPage":t[2]||(t[2]=l=>A(y)?y.value=l:null),total:o(V),"items-per-page":o(E)},null,8,["current-page","total","items-per-page"])):u("",!0),o(D).length===0?(a(),r("div",Se,[t[19]||(t[19]=e("p",{class:"text-slate-500"},"No team members found.",-1)),e("button",{onClick:t[3]||(t[3]=l=>{o(b).searchQuery="",p.value="all"}),class:"mt-2 text-indigo-400 hover:text-indigo-300 text-sm"},"Clear Filters")])):u("",!0),(a(),B(le,{to:"body"},[o(v)?(a(),r("div",Ae,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[4]||(t[4]=l=>v.value=!1)}),e("div",Ee,[t[29]||(t[29]=e("div",{class:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl -mr-16 -mt-16 pointer-events-none"},null,-1)),e("div",Re,[e("div",Fe,[e("h3",Be,c(o(U)?"Edit Team Member":"Add Team Member"),1),e("button",{onClick:t[5]||(t[5]=l=>v.value=!1),class:"text-slate-400 hover:text-white"},[f(o(ue),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:te(Q,["prevent"])},[e("div",Ie,[e("div",ze,[t[20]||(t[20]=e("label",{class:"text-sm font-medium text-slate-300"},"Full Name",-1)),m(e("input",{"onUpdate:modelValue":t[6]||(t[6]=l=>o(s).name=l),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[_,o(s).name]])]),e("div",Le,[t[21]||(t[21]=e("label",{class:"text-sm font-medium text-slate-300"},"Email Address",-1)),m(e("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>o(s).email=l),required:"",type:"email",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[_,o(s).email]])])]),e("div",Ne,[e("div",Oe,[t[23]||(t[23]=e("label",{class:"text-sm font-medium text-slate-300"},"Role",-1)),m(e("select",{"onUpdate:modelValue":t[8]||(t[8]=l=>o(s).role=l),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[22]||(t[22]=[e("option",null,"Frontend Developer",-1),e("option",null,"Backend Developer",-1),e("option",null,"Product Designer",-1),e("option",null,"Intern",-1),e("option",null,"DevOps Engineer",-1),e("option",null,"Project Manager",-1)])],512),[[I,o(s).role]])]),e("div",qe,[t[24]||(t[24]=e("label",{class:"text-sm font-medium text-slate-300"},"Job Title (Public)",-1)),m(e("input",{"onUpdate:modelValue":t[9]||(t[9]=l=>o(s).jobTitle=l),type:"text",placeholder:"e.g. Senior Developer",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[_,o(s).jobTitle]])])]),e("div",Qe,[t[25]||(t[25]=e("label",{class:"text-sm font-medium text-slate-300"},"Bio",-1)),m(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=l=>o(s).bio=l),rows:"3",placeholder:"A brief bio for the public team page...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[_,o(s).bio]])]),e("div",Je,[e("div",We,[t[26]||(t[26]=e("label",{class:"text-sm font-medium text-slate-300"},"LinkedIn URL",-1)),m(e("input",{"onUpdate:modelValue":t[11]||(t[11]=l=>o(s).linkedinUrl=l),type:"url",placeholder:"https://linkedin.com/in/...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[_,o(s).linkedinUrl]])]),e("div",Xe,[t[27]||(t[27]=e("label",{class:"text-sm font-medium text-slate-300"},"Image URL",-1)),m(e("input",{"onUpdate:modelValue":t[12]||(t[12]=l=>o(s).imageUrl=l),type:"url",placeholder:"https://...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[_,o(s).imageUrl]])])]),e("div",Ge,[t[28]||(t[28]=e("div",null,[e("p",{class:"text-sm font-medium text-white"},"Show on Public Website"),e("p",{class:"text-xs text-slate-500"},"Display this member on the public team page")],-1)),e("button",{type:"button",onClick:t[13]||(t[13]=l=>o(s).isPublic=!o(s).isPublic),class:k(["w-12 h-7 rounded-full relative transition-colors",o(s).isPublic?"bg-indigo-600":"bg-slate-700"])},[e("div",{class:k(["absolute top-1 w-5 h-5 bg-white rounded-full transition-all duration-300",o(s).isPublic?"right-1":"left-1"])},null,2)],2)]),e("div",He,[e("button",{type:"button",onClick:t[14]||(t[14]=l=>v.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",Ke,c(o(U)?"Save Changes":"Send Invite"),1)])],32)])])])):u("",!0)])),f(oe,{modelValue:o(P),"onUpdate:modelValue":t[15]||(t[15]=l=>A(P)?P.value=l:null),title:"Remove Team Member",description:`Are you sure you want to remove ${o(T)?.name} from the team? This action cannot be undone.`,"confirm-text":"Remove Member",onConfirm:W},null,8,["modelValue","description"]),f(G,{ref_key:"toastRef",ref:C,title:o(x),message:o(h),type:o(w)},null,8,["title","message","type"])])}}},vt=ie(Ye,[["__scopeId","data-v-e15acbf7"]]);export{vt as default};
