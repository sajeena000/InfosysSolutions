import{_ as V}from"./ezhJEGkX.js";import{r as i,k as C,D as j,c as d,a as e,l as m,p as B,A as T,q as n,s as M,b as N,m as P,F as x,z as g,o as r,I as $,t as w,G as z,B as F}from"./PsU8fGEG.js";import{u as R}from"./BDJivQ1Z.js";const A={class:"space-y-8"},I={class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 backdrop-blur-sm flex flex-col"},L={class:"flex items-center justify-between mb-6"},E={class:"h-64 w-full"},G={class:"mt-4 pt-4 border-t border-white/5"},K={class:"flex items-center justify-between mb-3"},q={key:0,class:"text-xs text-indigo-400"},O={key:1,class:"text-xs text-emerald-400"},U={class:"flex items-end justify-between gap-2"},X=["value","onBlur","placeholder"],H={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},J={class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 backdrop-blur-sm"},Q={class:"space-y-5"},W={class:"flex justify-between text-sm mb-1"},Y={class:"text-slate-300 font-medium"},Z={class:"text-slate-400"},ee={class:"h-2 w-full bg-slate-950 rounded-full overflow-hidden border border-white/5"},ae={__name:"analytics",setup(te){const y=[{name:"Direct",value:45,color:"bg-indigo-500"},{name:"Google Search",value:32,color:"bg-purple-500"},{name:"Twitter / X",value:15,color:"bg-sky-500"},{name:"Newsletter",value:8,color:"bg-emerald-500"}],o=i("7d"),c=i(!1),u=i(!1),v=i([35,45,30,60,75,50,65,80,70,45,90,60]),p=i([15,20,25,40,30,45,35,30,50,60,55,40]),_=async()=>{try{const l=await $fetch("/api/revenue");v.value=l["7d"],p.value=l["30d"]}catch(l){console.error("Failed to fetch revenue data:",l)}};C(()=>{_()});const b=j(()=>o.value==="7d"?v.value:p.value),k=async(l,t)=>{const a=Math.max(0,Math.min(100,parseInt(t)||0));o.value==="7d"?v.value[l]=a:p.value[l]=a,c.value=!0,u.value=!1;try{await $fetch("/api/revenue",{method:"POST",body:{period:o.value,dataIndex:l,value:a}}),u.value=!0,setTimeout(()=>{u.value=!1},2e3)}catch(s){console.error("Failed to save:",s)}finally{c.value=!1}},{downloadCSV:D}=R(),S=()=>{const l=["Data Point","Value"],t=b.value.map((a,s)=>[`Point ${s+1}`,a]);D(l,t,`analytics_report_${o.value}.csv`)};return(l,t)=>{const a=V;return r(),d("div",A,[e("div",{class:"flex items-center justify-between"},[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Analytics"),e("p",{class:"text-slate-400"},"Traffic sources and user engagement.")],-1)),e("div",{class:"flex gap-2"},[e("button",{onClick:S,class:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-sm font-medium border border-white/10 transition-colors"}," Download CSV ")])]),t[8]||(t[8]=m('<div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 relative overflow-hidden"><div class="absolute right-0 top-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl -mr-10 -mt-10"></div><p class="text-slate-400 text-sm mb-1">Page Views</p><p class="text-3xl font-display font-bold text-white">2.4M</p><div class="mt-4 h-1 w-full bg-slate-800 rounded-full overflow-hidden"><div class="h-full bg-indigo-500 w-[70%]"></div></div></div><div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 relative overflow-hidden"><div class="absolute right-0 top-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl -mr-10 -mt-10"></div><p class="text-slate-400 text-sm mb-1">Avg. Duration</p><p class="text-3xl font-display font-bold text-white">4m 12s</p><div class="mt-4 h-1 w-full bg-slate-800 rounded-full overflow-hidden"><div class="h-full bg-emerald-500 w-[45%]"></div></div></div><div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 relative overflow-hidden"><div class="absolute right-0 top-0 w-32 h-32 bg-purple-500/10 rounded-full blur-2xl -mr-10 -mt-10"></div><p class="text-slate-400 text-sm mb-1">Conversion Rate</p><p class="text-3xl font-display font-bold text-white">3.8%</p><div class="mt-4 h-1 w-full bg-slate-800 rounded-full overflow-hidden"><div class="h-full bg-purple-500 w-[30%]"></div></div></div></div>',1)),e("div",I,[e("div",L,[t[4]||(t[4]=e("h2",{class:"text-lg font-display font-semibold text-white"},"Revenue Trends",-1)),B(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>M(o)?o.value=s:null),class:"bg-slate-950 border border-white/10 rounded-lg text-xs text-slate-400 px-3 py-1 outline-none focus:border-indigo-500 transition-colors cursor-pointer"},[...t[3]||(t[3]=[e("option",{value:"7d"},"Last 7 days",-1),e("option",{value:"30d"},"Last 30 days",-1)])],512),[[T,n(o)]])]),e("div",E,[N(a,{data:n(b)},null,8,["data"])]),e("div",G,[e("div",K,[t[5]||(t[5]=e("p",{class:"text-xs text-slate-500"},"Edit values (0-100%)",-1)),n(c)?(r(),d("span",q,"Saving...")):n(u)?(r(),d("span",O,"âœ“ Saved")):P("",!0)]),e("div",U,[(r(!0),d(x,null,g(n(b),(s,f)=>(r(),d("div",{key:f,class:"flex-1 flex flex-col items-center"},[e("input",{type:"number",value:s,onBlur:h=>k(f,h.target.value),onKeydown:t[1]||(t[1]=$(h=>{h.target.blur()},["enter"])),min:"0",max:"100",class:"w-full bg-slate-950 border border-white/10 rounded text-xs text-center text-slate-300 py-1 outline-none focus:border-indigo-500 transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:f+1},null,40,X)]))),128))])])]),e("div",H,[e("div",J,[t[6]||(t[6]=e("h3",{class:"text-lg font-display font-semibold text-white mb-6"},"Top Referrers",-1)),e("div",Q,[(r(),d(x,null,g(y,s=>e("div",{key:s.name,class:"group"},[e("div",W,[e("span",Y,w(s.name),1),e("span",Z,w(s.value)+"%",1)]),e("div",ee,[e("div",{class:F(["h-full rounded-full transition-all duration-1000 group-hover:brightness-125",s.color]),style:z({width:s.value+"%"})},null,6)])])),64))])]),t[7]||(t[7]=m('<div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 backdrop-blur-sm"><h3 class="text-lg font-display font-semibold text-white mb-6">Device Breakdown</h3><div class="flex items-center gap-4 mb-8"><div class="flex-1 h-32 bg-slate-950 rounded-xl border border-white/5 flex items-end justify-center pb-0 overflow-hidden relative group"><div class="w-12 bg-indigo-500/80 h-[60%] rounded-t-lg group-hover:h-[65%] transition-all"></div><span class="absolute bottom-2 text-xs text-white">Mobile</span></div><div class="flex-1 h-32 bg-slate-950 rounded-xl border border-white/5 flex items-end justify-center pb-0 overflow-hidden relative group"><div class="w-12 bg-purple-500/80 h-[80%] rounded-t-lg group-hover:h-[85%] transition-all"></div><span class="absolute bottom-2 text-xs text-white">Desktop</span></div><div class="flex-1 h-32 bg-slate-950 rounded-xl border border-white/5 flex items-end justify-center pb-0 overflow-hidden relative group"><div class="w-12 bg-emerald-500/80 h-[20%] rounded-t-lg group-hover:h-[25%] transition-all"></div><span class="absolute bottom-2 text-xs text-white">Tablet</span></div></div><p class="text-sm text-slate-400"> Desktop traffic is performing 25% better than mobile this week. Consider optimizing mobile checkout flow. </p></div>',1))])])}}};export{ae as default};
