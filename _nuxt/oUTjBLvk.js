import{_ as H}from"./BlqDiOG6.js";import{_ as J}from"./DzlxV7ns.js";import{_ as K}from"./9SQ5mlpr.js";import{g as W,r as n,k as Y,x as L,c as r,a as e,y as z,m as k,b as u,F as B,z as N,q as o,s as j,t as d,n as Z,p as w,v as y,T as ee,o as i,B as V}from"./PsU8fGEG.js";import{C as te}from"./BDYFHDsp.js";import{P as se}from"./DAW6YDx9.js";import{T as oe}from"./-izbdZX4.js";import{M as le}from"./G_qkxOkQ.js";import{X as ne}from"./BAiJTkiT.js";import"./ZVIKdQKX.js";import"./w7z5CoPY.js";import"./DlAUqK2U.js";import"./DUIq94hi.js";import"./C0WVU3vH.js";const ae={class:"space-y-8"},ie={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},re={class:"flex items-center gap-4"},de={class:"flex p-1 bg-slate-900/50 border border-white/5 rounded-lg backdrop-blur-sm"},ue=["onClick"],ce={key:0,class:"text-center py-20"},pe={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},me={key:2,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},fe={class:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-all"},ve=["onClick"],xe=["onClick"],ge={class:"text-white text-xs uppercase"},be={class:"text-white text-lg font-bold"},he={class:"text-white font-medium text-lg mb-1"},we={key:0,class:"flex items-center gap-2 text-slate-500 text-sm mb-3"},ye={class:"truncate"},_e={key:1,class:"text-slate-400 text-sm line-clamp-2"},De={class:"mt-4 pt-4 border-t border-white/5"},ke={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},Ce={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden"},Ee={class:"flex justify-between items-center mb-6"},Ue={class:"text-xl font-display font-bold text-white"},$e={class:"space-y-1"},Te={class:"grid grid-cols-2 gap-4"},Pe={class:"space-y-1"},Me={class:"space-y-1"},Ve={class:"space-y-1"},Se={class:"space-y-1"},Fe={class:"pt-4 flex gap-3"},Le=["disabled"],We={__name:"events",setup(ze){const C=W(),E=n([]),U=n(!0),c=n(!1),v=n(!1),_=n(!1),x=n(!1),g=n(null),$=n(null),p=n(""),m=n(""),b=n("success"),a=n({id:null,title:"",eventDate:"",location:"",imageUrl:"",description:""});Y(()=>{D()});const f=n(1),T=n(0),S=n(9),h=n("all"),D=async()=>{U.value=!0;try{const l=await $fetch("/api/admin/events",{params:{page:f.value,limit:S.value,status:h.value,search:C.searchQuery}});E.value=l.data,T.value=l.meta.total}catch(l){console.error("Failed to fetch events:",l)}finally{U.value=!1}};L([f,h,()=>C.searchQuery],()=>{D()}),L([h,()=>C.searchQuery],()=>{f.value=1});const P=(l=null)=>{l?(v.value=!0,a.value={id:l.id,title:l.title,eventDate:l.eventDate?l.eventDate.split("T")[0]:"",location:l.location||"",imageUrl:l.imageUrl||"",description:l.description||""}):(v.value=!1,a.value={id:null,title:"",eventDate:"",location:"",imageUrl:"",description:""}),c.value=!0},R=async()=>{_.value=!0;try{v.value?(await $fetch(`/api/admin/events/${a.value.id}`,{method:"PUT",body:a.value}),p.value="Updated",m.value="Event updated successfully."):(await $fetch("/api/admin/events",{method:"POST",body:a.value}),p.value="Created",m.value="Event created successfully."),b.value="success",c.value=!1,D()}catch(l){p.value="Error",m.value="Failed to save event.",b.value="error",console.error(l)}finally{_.value=!1,$.value.show()}},q=l=>{g.value=l,x.value=!0},A=async()=>{if(g.value)try{await $fetch(`/api/admin/events/${g.value.id}`,{method:"DELETE"}),p.value="Deleted",m.value="Event deleted.",b.value="success",D()}catch{p.value="Error",m.value="Failed to delete event.",b.value="error"}finally{x.value=!1,g.value=null,$.value.show()}},M=l=>l?new Date(l)<new Date:!1,Q=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short"}):"--",I=l=>l?new Date(l).getDate():"--";return(l,t)=>{const O=H,X=J,G=K;return i(),r("div",ae,[e("div",ie,[t[12]||(t[12]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Events"),e("p",{class:"text-slate-400"},"Manage company events and conferences.")],-1)),e("div",re,[e("div",de,[(i(),r(B,null,N(["all","upcoming","past"],s=>e("button",{key:s,onClick:F=>h.value=s,class:V(["px-3 py-1.5 text-xs font-medium rounded-md capitalize transition-all",o(h)===s?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-white"])},d(s),11,ue)),64))]),e("button",{onClick:t[0]||(t[0]=s=>P()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + New Event ")])]),o(U)?(i(),r("div",ce,[...t[13]||(t[13]=[e("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"text-slate-500 mt-4"},"Loading events...",-1)])])):o(E).length===0?(i(),r("div",pe,[u(o(te),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t[14]||(t[14]=e("p",{class:"text-slate-400 mb-2"},"No events scheduled",-1)),e("button",{onClick:t[1]||(t[1]=s=>P()),class:"text-indigo-400 hover:text-indigo-300 text-sm font-medium"}," Create your first event ")])):(i(),r("div",me,[(i(!0),r(B,null,N(o(E),s=>(i(),r("div",{key:s.id,class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 hover:border-indigo-500/30 transition-all group relative"},[e("div",fe,[e("button",{onClick:F=>P(s),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit"},[u(o(se),{class:"w-4 h-4"})],8,ve),e("button",{onClick:F=>q(s),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[u(o(oe),{class:"w-4 h-4"})],8,xe)]),e("div",{class:V(["w-14 h-14 rounded-xl flex flex-col items-center justify-center mb-4",M(s.eventDate)?"bg-slate-700":"bg-gradient-to-br from-indigo-600 to-purple-600"])},[e("span",ge,d(Q(s.eventDate)),1),e("span",be,d(I(s.eventDate)),1)],2),e("h3",he,d(s.title),1),s.location?(i(),r("div",we,[u(o(le),{class:"w-4 h-4"}),e("span",ye,d(s.location),1)])):k("",!0),s.description?(i(),r("p",_e,d(s.description),1)):k("",!0),e("div",De,[e("span",{class:V(["px-3 py-1 text-xs font-medium rounded-full",M(s.eventDate)?"bg-slate-500/20 text-slate-400":"bg-emerald-500/20 text-emerald-400"])},d(M(s.eventDate)?"Past":"Upcoming"),3)])]))),128))])),o(T)>0?(i(),z(O,{key:3,"current-page":o(f),"onUpdate:currentPage":t[2]||(t[2]=s=>j(f)?f.value=s:null),total:o(T),"items-per-page":o(S)},null,8,["current-page","total","items-per-page"])):k("",!0),(i(),z(ee,{to:"body"},[o(c)?(i(),r("div",ke,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[3]||(t[3]=s=>c.value=!1)}),e("div",Ce,[e("div",Ee,[e("h3",Ue,d(o(v)?"Edit Event":"Create Event"),1),e("button",{onClick:t[4]||(t[4]=s=>c.value=!1),class:"text-slate-400 hover:text-white"},[u(o(ne),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:Z(R,["prevent"])},[e("div",$e,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-slate-300"},"Event Title",-1)),w(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(a).title=s),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[y,o(a).title]])]),e("div",Te,[e("div",Pe,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-slate-300"},"Event Date",-1)),w(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(a).eventDate=s),required:"",type:"date",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[y,o(a).eventDate]])]),e("div",Me,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-slate-300"},"Location",-1)),w(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(a).location=s),type:"text",placeholder:"e.g. San Francisco, CA",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[y,o(a).location]])])]),e("div",Ve,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-slate-300"},"Image URL",-1)),w(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(a).imageUrl=s),type:"url",placeholder:"https://...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[y,o(a).imageUrl]])]),e("div",Se,[t[19]||(t[19]=e("label",{class:"text-sm font-medium text-slate-300"},"Description",-1)),w(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=s=>o(a).description=s),rows:"3",placeholder:"Describe the event...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[y,o(a).description]])]),e("div",Fe,[e("button",{type:"button",onClick:t[10]||(t[10]=s=>c.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(_),class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-70"},d(o(_)?"Saving...":o(v)?"Save Changes":"Create Event"),9,Le)])],32)])])):k("",!0)])),u(X,{modelValue:o(x),"onUpdate:modelValue":t[11]||(t[11]=s=>j(x)?x.value=s:null),title:"Delete Event",description:`Are you sure you want to delete '${o(g)?.title}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:A},null,8,["modelValue","description"]),u(G,{ref_key:"toastRef",ref:$,title:o(p),message:o(m),type:o(b)},null,8,["title","message","type"])])}}};export{We as default};
