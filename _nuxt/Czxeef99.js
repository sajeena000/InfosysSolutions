import{_ as re}from"./roYjeSkd.js";import{_ as de}from"./Bzmvxflw.js";import{_ as ue}from"./DaCqz5ct.js";import{g as ce,r as i,C as pe,H as z,c as u,a as e,l as F,k as V,b as m,q as d,s as h,n as o,y as I,z as q,t as a,F as W,m as R,p as Q,v as C,T as G,o as r,x as H}from"./C67oDYFJ.js";import{B as me}from"./CMKd8oo9.js";import{P as xe}from"./CCF8O-SF.js";import{T as ge}from"./CZLd8XgW.js";import{X}from"./Dsf7Lo2Z.js";import{C as ve}from"./CyGfeVE_.js";import"./DmBsCVHN.js";import"./33Jzwh04.js";import"./DlAUqK2U.js";import"./CNSjgihU.js";import"./3wAkTvYa.js";const fe={class:"space-y-8"},be={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},we={class:"flex items-center gap-4 flex-wrap"},ye={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},he={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},Ce={class:"text-2xl font-display font-bold text-white"},ke={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},Pe={class:"text-2xl font-display font-bold text-emerald-400"},_e={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},De={class:"text-2xl font-display font-bold text-amber-400"},Te={class:"p-4 rounded-xl bg-slate-900/40 border border-white/5"},Se={class:"text-2xl font-display font-bold text-indigo-400"},$e={key:0,class:"text-center py-20"},Ue={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},Ve={key:2,class:"overflow-x-auto"},Ie={class:"w-full"},Ae={class:"divide-y divide-white/5"},Ee={class:"p-4"},Be={class:"text-white font-medium"},Me={class:"text-slate-500 text-xs"},Ne={class:"p-4"},je={class:"flex items-center gap-2"},Fe=["src","alt"],Oe={class:"text-slate-300"},Le={class:"p-4"},ze={class:"px-2 py-1 bg-white/5 text-slate-400 text-xs rounded-lg"},qe={class:"p-4"},We={class:"p-4 text-white font-medium"},Re={class:"p-4"},Qe={class:"p-4"},Ge={class:"flex justify-end gap-2"},He=["onClick"],Xe=["onClick"],Je={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},Ke={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden max-h-[90vh] overflow-y-auto"},Ye={class:"flex justify-between items-center mb-6"},Ze={class:"text-xl font-display font-bold text-white"},et={class:"space-y-1"},tt={class:"space-y-1"},st={class:"relative"},ot=["value"],lt={class:"grid grid-cols-2 gap-4"},nt={class:"space-y-1"},it={class:"space-y-1"},at={class:"grid grid-cols-2 gap-4"},rt={class:"space-y-1"},dt={class:"space-y-1"},ut={class:"space-y-1"},ct={class:"space-y-1"},pt={class:"pt-4 flex gap-3"},mt=["disabled"],xt={key:0,class:"fixed inset-0 z-[110] flex items-center justify-center px-4"},gt={class:"relative w-full max-w-md bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6"},vt={class:"flex justify-between items-center mb-6"},ft={class:"space-y-1"},bt={class:"space-y-1"},wt={class:"pt-4 flex gap-3"},yt=["disabled"],Mt={__name:"projects",setup(ht){const A=ce(),J={Basic:2999,Professional:9999,Enterprise:25e3,Custom:0},E=i([]),B=i([]),M=i(!0),g=i(!1),v=i(!1),k=i(!1),S=i(!1),$=i(!1),P=i(!1),_=i(null),D=i(null),c=i(""),p=i(""),x=i("success"),n=i({id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),f=i({name:"",email:""});pe(()=>{U(),K()});const K=async()=>{try{B.value=await $fetch("/api/clients")}catch(l){console.error("Failed to fetch clients:",l)}},b=i(1),N=i(0),O=i(10),w=i("all"),y=i("all"),T=i({totalValue:0,active:0,pending:0,completed:0}),U=async()=>{M.value=!0;try{const l=await $fetch("/api/projects",{params:{page:b.value,limit:O.value,status:w.value,type:y.value,search:A.searchQuery}});E.value=l.data,N.value=l.meta.total,l.meta.stats&&(T.value=l.meta.stats)}catch(l){console.error("Failed to fetch projects:",l)}finally{M.value=!1}};z([b,w,y,()=>A.searchQuery],()=>{U()}),z([w,y,()=>A.searchQuery],()=>{b.value=1});const Y=()=>{const l=n.value.pricingPackage;l!=="Custom"&&(n.value.value=J[l])},j=(l=null)=>{l?(k.value=!0,n.value={id:l.id,name:l.name,clientId:l.clientId,projectType:l.projectType,pricingPackage:l.pricingPackage||"Basic",value:l.value||0,status:l.status,description:l.description||"",startDate:l.startDate?new Date(l.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}):(k.value=!1,n.value={id:null,name:"",clientId:"",projectType:"Web",pricingPackage:"Basic",value:2999,status:"pending",description:"",startDate:new Date().toISOString().split("T")[0]}),g.value=!0},Z=async()=>{S.value=!0;try{k.value?(await $fetch(`/api/projects/${n.value.id}`,{method:"PUT",body:n.value}),c.value="Updated",p.value="Project updated successfully."):(await $fetch("/api/projects",{method:"POST",body:n.value}),c.value="Created",p.value="Project created successfully."),x.value="success",g.value=!1,U()}catch(l){c.value="Error",p.value="Failed to save project.",x.value="error",console.error(l)}finally{S.value=!1,D.value.show()}},ee=async()=>{$.value=!0;try{const l=await $fetch("/api/clients",{method:"POST",body:f.value});B.value.unshift(l),n.value.clientId=l.id,f.value={name:"",email:""},v.value=!1,c.value="Client Created",p.value=`${l.name} has been added.`,x.value="success",D.value.show()}catch(l){c.value="Error",p.value="Failed to create client.",x.value="error",console.error(l),D.value.show()}finally{$.value=!1}},te=l=>{_.value=l,P.value=!0},se=async()=>{if(_.value)try{await $fetch(`/api/projects/${_.value.id}`,{method:"DELETE"}),c.value="Deleted",p.value="Project deleted.",x.value="success",U()}catch{c.value="Error",p.value="Failed to delete project.",x.value="error"}finally{P.value=!1,_.value=null,D.value.show()}},L=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(l||0),oe=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Unknown";return(l,t)=>{const le=re,ne=de,ie=ue;return r(),u("div",fe,[e("div",be,[t[25]||(t[25]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Projects"),e("p",{class:"text-slate-400"},"Track and manage client projects.")],-1)),e("div",we,[d(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>I(w)?w.value=s:null),class:"bg-slate-900/50 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-slate-300 focus:outline-none focus:border-indigo-500/50"},[...t[23]||(t[23]=[q('<option value="all">All Status</option><option value="pending">Pending</option><option value="active">Active</option><option value="completed">Completed</option><option value="cancelled">Cancelled</option>',5)])],512),[[h,o(w)]]),d(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>I(y)?y.value=s:null),class:"bg-slate-900/50 border border-white/5 rounded-lg px-3 py-1.5 text-xs text-slate-300 focus:outline-none focus:border-indigo-500/50"},[...t[24]||(t[24]=[q('<option value="all">All Types</option><option value="Web Development">Web</option><option value="Mobile App">Mobile</option><option value="AI/ML">AI/ML</option><option value="DevOps">DevOps</option><option value="Consulting">Consulting</option>',6)])],512),[[h,o(y)]]),e("button",{onClick:t[2]||(t[2]=s=>j()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + New Project ")])]),e("div",ye,[e("div",he,[t[26]||(t[26]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Total Value",-1)),e("p",Ce,a(L(o(T).totalValue)),1)]),e("div",ke,[t[27]||(t[27]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Active",-1)),e("p",Pe,a(o(T).active),1)]),e("div",_e,[t[28]||(t[28]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Pending",-1)),e("p",De,a(o(T).pending),1)]),e("div",Te,[t[29]||(t[29]=e("p",{class:"text-slate-500 text-xs uppercase tracking-wider"},"Completed",-1)),e("p",Se,a(o(T).completed),1)])]),o(M)?(r(),u("div",$e,[...t[30]||(t[30]=[e("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"text-slate-500 mt-4"},"Loading projects...",-1)])])):o(E).length===0?(r(),u("div",Ue,[m(o(me),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t[31]||(t[31]=e("p",{class:"text-slate-400 mb-2"},"No projects yet",-1)),e("button",{onClick:t[3]||(t[3]=s=>j()),class:"text-indigo-400 hover:text-indigo-300 text-sm font-medium"}," Create your first project ")])):(r(),u("div",Ve,[e("table",Ie,[t[32]||(t[32]=e("thead",null,[e("tr",{class:"text-left text-xs uppercase tracking-wider text-slate-500"},[e("th",{class:"p-4"},"Project"),e("th",{class:"p-4"},"Client"),e("th",{class:"p-4"},"Type"),e("th",{class:"p-4"},"Package"),e("th",{class:"p-4"},"Value"),e("th",{class:"p-4"},"Status"),e("th",{class:"p-4 text-right"},"Actions")])],-1)),e("tbody",Ae,[(r(!0),u(W,null,R(o(E),s=>(r(),u("tr",{key:s.id,class:"hover:bg-white/5 transition-colors"},[e("td",Ee,[e("p",Be,a(s.name),1),e("p",Me,a(oe(s.startDate||s.createdAt)),1)]),e("td",Ne,[e("div",je,[s.clientAvatar?(r(),u("img",{key:0,src:s.clientAvatar,class:"w-6 h-6 rounded-full bg-slate-700",alt:s.clientName},null,8,Fe)):V("",!0),e("span",Oe,a(s.clientName||"Unknown"),1)])]),e("td",Le,[e("span",ze,a(s.projectType),1)]),e("td",qe,[e("span",{class:H(["px-2 py-1 text-xs rounded-lg",{"bg-slate-500/20 text-slate-300":s.pricingPackage==="Basic","bg-blue-500/20 text-blue-400":s.pricingPackage==="Professional","bg-purple-500/20 text-purple-400":s.pricingPackage==="Enterprise","bg-amber-500/20 text-amber-400":s.pricingPackage==="Custom"}])},a(s.pricingPackage||"Basic"),3)]),e("td",We,a(L(s.value)),1),e("td",Re,[e("span",{class:H(["px-2 py-1 text-xs font-medium rounded-full capitalize",{"bg-emerald-500/20 text-emerald-400":s.status==="active","bg-amber-500/20 text-amber-400":s.status==="pending","bg-indigo-500/20 text-indigo-400":s.status==="completed","bg-rose-500/20 text-rose-400":s.status==="cancelled"}])},a(s.status),3)]),e("td",Qe,[e("div",Ge,[e("button",{onClick:ae=>j(s),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit"},[m(o(xe),{class:"w-4 h-4"})],8,He),e("button",{onClick:ae=>te(s),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[m(o(ge),{class:"w-4 h-4"})],8,Xe)])])]))),128))])])])),o(N)>0?(r(),F(le,{key:3,"current-page":o(b),"onUpdate:currentPage":t[4]||(t[4]=s=>I(b)?b.value=s:null),total:o(N),"items-per-page":o(O)},null,8,["current-page","total","items-per-page"])):V("",!0),(r(),F(G,{to:"body"},[o(g)?(r(),u("div",Je,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[5]||(t[5]=s=>g.value=!1)}),e("div",Ke,[e("div",Ye,[e("h3",Ze,a(o(k)?"Edit Project":"Create Project"),1),e("button",{onClick:t[6]||(t[6]=s=>g.value=!1),class:"text-slate-400 hover:text-white"},[m(o(X),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:Q(Z,["prevent"])},[e("div",et,[t[33]||(t[33]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Name",-1)),d(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(n).name=s),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(n).name]])]),e("div",tt,[t[35]||(t[35]=e("label",{class:"text-sm font-medium text-slate-300"},"Client",-1)),e("div",st,[d(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(n).clientId=s),required:"",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all appearance-none cursor-pointer"},[t[34]||(t[34]=e("option",{value:"",disabled:""},"Select a client...",-1)),(r(!0),u(W,null,R(o(B),s=>(r(),u("option",{key:s.id,value:s.id},a(s.name),9,ot))),128))],512),[[h,o(n).clientId]]),m(o(ve),{class:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]),e("button",{type:"button",onClick:t[9]||(t[9]=s=>v.value=!0),class:"text-xs text-indigo-400 hover:text-indigo-300 mt-1"}," + Create new client ")]),e("div",lt,[e("div",nt,[t[37]||(t[37]=e("label",{class:"text-sm font-medium text-slate-300"},"Project Type",-1)),d(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>o(n).projectType=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[36]||(t[36]=[e("option",null,"Web",-1),e("option",null,"Mobile",-1),e("option",null,"AI",-1),e("option",null,"DevOps",-1),e("option",null,"Consulting",-1),e("option",null,"Other",-1)])],512),[[h,o(n).projectType]])]),e("div",it,[t[39]||(t[39]=e("label",{class:"text-sm font-medium text-slate-300"},"Pricing Package",-1)),d(e("select",{"onUpdate:modelValue":t[11]||(t[11]=s=>o(n).pricingPackage=s),onChange:Y,class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[38]||(t[38]=[e("option",{value:"Basic"},"Basic ($2,999)",-1),e("option",{value:"Professional"},"Professional ($9,999)",-1),e("option",{value:"Enterprise"},"Enterprise ($15k-$50k)",-1),e("option",{value:"Custom"},"Custom",-1)])],544),[[h,o(n).pricingPackage]])])]),e("div",at,[e("div",rt,[t[40]||(t[40]=e("label",{class:"text-sm font-medium text-slate-300"},"Value ($)",-1)),d(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o(n).value=s),type:"number",min:"0",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(n).value,void 0,{number:!0}]])]),e("div",dt,[t[42]||(t[42]=e("label",{class:"text-sm font-medium text-slate-300"},"Status",-1)),d(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>o(n).status=s),class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},[...t[41]||(t[41]=[e("option",{value:"pending"},"Pending",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"cancelled"},"Cancelled",-1)])],512),[[h,o(n).status]])])]),e("div",ut,[t[43]||(t[43]=e("label",{class:"text-sm font-medium text-slate-300"},"Start Date",-1)),d(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o(n).startDate=s),type:"date",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(n).startDate]])]),e("div",ct,[t[44]||(t[44]=e("label",{class:"text-sm font-medium text-slate-300"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=s=>o(n).description=s),rows:"3",placeholder:"Project details...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[C,o(n).description]])]),e("div",pt,[e("button",{type:"button",onClick:t[16]||(t[16]=s=>g.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(S),class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-70"},a(o(S)?"Saving...":o(k)?"Save Changes":"Create Project"),9,mt)])],32)])])):V("",!0)])),(r(),F(G,{to:"body"},[o(v)?(r(),u("div",xt,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[17]||(t[17]=s=>v.value=!1)}),e("div",gt,[e("div",vt,[t[45]||(t[45]=e("h3",{class:"text-lg font-display font-bold text-white"},"Create New Client",-1)),e("button",{onClick:t[18]||(t[18]=s=>v.value=!1),class:"text-slate-400 hover:text-white"},[m(o(X),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:Q(ee,["prevent"])},[e("div",ft,[t[46]||(t[46]=e("label",{class:"text-sm font-medium text-slate-300"},"Company Name",-1)),d(e("input",{"onUpdate:modelValue":t[19]||(t[19]=s=>o(f).name=s),required:"",type:"text",placeholder:"Acme Corporation",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(f).name]])]),e("div",bt,[t[47]||(t[47]=e("label",{class:"text-sm font-medium text-slate-300"},"Contact Email",-1)),d(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>o(f).email=s),required:"",type:"email",placeholder:"contact@company.com",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[C,o(f).email]])]),e("div",wt,[e("button",{type:"button",onClick:t[21]||(t[21]=s=>v.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o($),class:"flex-1 px-4 py-2.5 rounded-xl bg-emerald-600 hover:bg-emerald-500 text-white text-sm font-medium shadow-lg shadow-emerald-500/20 transition-all disabled:opacity-70"},a(o($)?"Creating...":"Create Client"),9,yt)])],32)])])):V("",!0)])),m(ne,{modelValue:o(P),"onUpdate:modelValue":t[22]||(t[22]=s=>I(P)?P.value=s:null),title:"Delete Project",description:`Are you sure you want to delete '${o(_)?.name}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:se},null,8,["modelValue","description"]),m(ie,{ref_key:"toastRef",ref:D,title:o(c),message:o(p),type:o(x)},null,8,["title","message","type"])])}}};export{Mt as default};
