import{_ as j}from"./Bch17VXu.js";import{_ as B}from"./B7zsFk_Y.js";import{r as i,C as R,c as r,a as e,l as q,b as u,n as o,F as z,m as A,k as E,t as d,p as I,q as b,v as h,T as O,y as X,o as a,x as T}from"./BAvuBg4s.js";import{_ as G}from"./DlAUqK2U.js";import{C as H}from"./U9zfMO1I.js";import{P as J}from"./D4D9W4AW.js";import{T as K}from"./CwKXUYwU.js";import{M as Q}from"./BErWYxN3.js";import{X as W}from"./BwZpcNeh.js";import"./CSLnjY7V.js";import"./uoPWt5tl.js";import"./CJ2mP9ci.js";const Y={class:"space-y-8"},Z={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},ee={key:0,class:"text-center py-20"},te={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},se={key:2,class:"grid md:grid-cols-2 lg:grid-cols-3 gap-6"},oe={class:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-all"},le=["onClick"],ne=["onClick"],ie={class:"text-white text-xs uppercase"},ae={class:"text-white text-lg font-bold"},re={class:"text-white font-medium text-lg mb-1"},de={key:0,class:"flex items-center gap-2 text-slate-500 text-sm mb-3"},ue={class:"truncate"},ce={key:1,class:"text-slate-400 text-sm line-clamp-2"},pe={class:"mt-4 pt-4 border-t border-white/5"},me={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center px-4"},fe={class:"relative w-full max-w-lg bg-slate-900 border border-white/10 rounded-2xl shadow-2xl p-6 overflow-hidden"},ve={class:"flex justify-between items-center mb-6"},xe={class:"text-xl font-display font-bold text-white"},ge={class:"space-y-1"},be={class:"grid grid-cols-2 gap-4"},he={class:"space-y-1"},we={class:"space-y-1"},ye={class:"space-y-1"},_e={class:"space-y-1"},De={class:"pt-4 flex gap-3"},ke=["disabled"],Ce={__name:"events",setup(Ee){const y=i([]),U=i(!0),c=i(!1),f=i(!1),w=i(!1),v=i(!1),x=i(null),_=i(null),p=i(""),m=i(""),g=i("success"),n=i({id:null,title:"",eventDate:"",location:"",imageUrl:"",description:""});R(()=>{D()});const D=async()=>{try{y.value=await $fetch("/api/events")}catch(l){console.error("Failed to fetch events:",l)}finally{U.value=!1}},k=(l=null)=>{l?(f.value=!0,n.value={id:l.id,title:l.title,eventDate:l.eventDate?l.eventDate.split("T")[0]:"",location:l.location||"",imageUrl:l.imageUrl||"",description:l.description||""}):(f.value=!1,n.value={id:null,title:"",eventDate:"",location:"",imageUrl:"",description:""}),c.value=!0},$=async()=>{w.value=!0;try{f.value?(await $fetch(`/api/events/${n.value.id}`,{method:"PUT",body:n.value}),p.value="Updated",m.value="Event updated successfully."):(await $fetch("/api/events",{method:"POST",body:n.value}),p.value="Created",m.value="Event created successfully."),g.value="success",c.value=!1,D()}catch(l){p.value="Error",m.value="Failed to save event.",g.value="error",console.error(l)}finally{w.value=!1,_.value.show()}},M=l=>{x.value=l,v.value=!0},V=async()=>{if(x.value)try{await $fetch(`/api/events/${x.value.id}`,{method:"DELETE"}),p.value="Deleted",m.value="Event deleted.",g.value="success",D()}catch{p.value="Error",m.value="Failed to delete event.",g.value="error"}finally{v.value=!1,x.value=null,_.value.show()}},C=l=>l?new Date(l)<new Date:!1,P=l=>l?new Date(l).toLocaleDateString("en-US",{month:"short"}):"--",F=l=>l?new Date(l).getDate():"--";return(l,t)=>{const L=j,S=B;return a(),r("div",Y,[e("div",Z,[t[11]||(t[11]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Events"),e("p",{class:"text-slate-400"},"Manage company events and conferences.")],-1)),e("button",{onClick:t[0]||(t[0]=s=>k()),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all"}," + New Event ")]),o(U)?(a(),r("div",ee,[...t[12]||(t[12]=[e("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),e("p",{class:"text-slate-500 mt-4"},"Loading events...",-1)])])):o(y).length===0?(a(),r("div",te,[u(o(H),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t[13]||(t[13]=e("p",{class:"text-slate-400 mb-2"},"No events scheduled",-1)),e("button",{onClick:t[1]||(t[1]=s=>k()),class:"text-indigo-400 hover:text-indigo-300 text-sm font-medium"}," Create your first event ")])):(a(),r("div",se,[(a(!0),r(z,null,A(o(y),s=>(a(),r("div",{key:s.id,class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 hover:border-indigo-500/30 transition-all group relative"},[e("div",oe,[e("button",{onClick:N=>k(s),class:"p-2 text-slate-400 hover:text-white hover:bg-white/10 rounded-lg transition-colors",title:"Edit"},[u(o(J),{class:"w-4 h-4"})],8,le),e("button",{onClick:N=>M(s),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[u(o(K),{class:"w-4 h-4"})],8,ne)]),e("div",{class:T(["w-14 h-14 rounded-xl flex flex-col items-center justify-center mb-4",C(s.eventDate)?"bg-slate-700":"bg-gradient-to-br from-indigo-600 to-purple-600"])},[e("span",ie,d(P(s.eventDate)),1),e("span",ae,d(F(s.eventDate)),1)],2),e("h3",re,d(s.title),1),s.location?(a(),r("div",de,[u(o(Q),{class:"w-4 h-4"}),e("span",ue,d(s.location),1)])):E("",!0),s.description?(a(),r("p",ce,d(s.description),1)):E("",!0),e("div",pe,[e("span",{class:T(["px-3 py-1 text-xs font-medium rounded-full",C(s.eventDate)?"bg-slate-500/20 text-slate-400":"bg-emerald-500/20 text-emerald-400"])},d(C(s.eventDate)?"Past":"Upcoming"),3)])]))),128))])),(a(),q(O,{to:"body"},[o(c)?(a(),r("div",me,[e("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:t[2]||(t[2]=s=>c.value=!1)}),e("div",fe,[e("div",ve,[e("h3",xe,d(o(f)?"Edit Event":"Create Event"),1),e("button",{onClick:t[3]||(t[3]=s=>c.value=!1),class:"text-slate-400 hover:text-white"},[u(o(W),{class:"w-5 h-5"})])]),e("form",{class:"space-y-4",onSubmit:I($,["prevent"])},[e("div",ge,[t[14]||(t[14]=e("label",{class:"text-sm font-medium text-slate-300"},"Event Title",-1)),b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o(n).title=s),required:"",type:"text",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[h,o(n).title]])]),e("div",be,[e("div",he,[t[15]||(t[15]=e("label",{class:"text-sm font-medium text-slate-300"},"Event Date",-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>o(n).eventDate=s),required:"",type:"date",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[h,o(n).eventDate]])]),e("div",we,[t[16]||(t[16]=e("label",{class:"text-sm font-medium text-slate-300"},"Location",-1)),b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=s=>o(n).location=s),type:"text",placeholder:"e.g. San Francisco, CA",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[h,o(n).location]])])]),e("div",ye,[t[17]||(t[17]=e("label",{class:"text-sm font-medium text-slate-300"},"Image URL",-1)),b(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o(n).imageUrl=s),type:"url",placeholder:"https://...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all"},null,512),[[h,o(n).imageUrl]])]),e("div",_e,[t[18]||(t[18]=e("label",{class:"text-sm font-medium text-slate-300"},"Description",-1)),b(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=s=>o(n).description=s),rows:"3",placeholder:"Describe the event...",class:"w-full bg-slate-950 border border-white/10 rounded-xl px-4 py-2.5 text-white text-sm focus:outline-none focus:border-indigo-500/50 focus:ring-1 focus:ring-indigo-500/50 transition-all resize-none"},null,512),[[h,o(n).description]])]),e("div",De,[e("button",{type:"button",onClick:t[9]||(t[9]=s=>c.value=!1),class:"flex-1 px-4 py-2.5 rounded-xl bg-white/5 hover:bg-white/10 text-white text-sm font-medium border border-white/5 transition-colors"}," Cancel "),e("button",{type:"submit",disabled:o(w),class:"flex-1 px-4 py-2.5 rounded-xl bg-indigo-600 hover:bg-indigo-500 text-white text-sm font-medium shadow-lg shadow-indigo-500/20 transition-all disabled:opacity-70"},d(o(w)?"Saving...":o(f)?"Save Changes":"Create Event"),9,ke)])],32)])])):E("",!0)])),u(L,{modelValue:o(v),"onUpdate:modelValue":t[10]||(t[10]=s=>X(v)?v.value=s:null),title:"Delete Event",description:`Are you sure you want to delete '${o(x)?.title}'? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:V},null,8,["modelValue","description"]),u(S,{ref_key:"toastRef",ref:_,title:o(p),message:o(m),type:o(g)},null,8,["title","message","type"])])}}},Re=G(Ce,[["__scopeId","data-v-0d7f63d5"]]);export{Re as default};
