import{_ as B}from"./roYjeSkd.js";import{_ as j}from"./Bzmvxflw.js";import{_ as z}from"./DaCqz5ct.js";import{g as Q,r as l,C as H,H as U,c as n,a as t,l as G,k as T,b as d,F as q,m as V,n as s,t as i,y as I,o as r,x as S,d as $}from"./C67oDYFJ.js";import{M as E}from"./nAY4-LbZ.js";import{P as J}from"./CR3zFeo8.js";import{c as K}from"./33Jzwh04.js";import{T as O}from"./CZLd8XgW.js";import"./DmBsCVHN.js";import"./DlAUqK2U.js";import"./CNSjgihU.js";import"./3wAkTvYa.js";const W=K("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),X={class:"space-y-8"},Y={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},Z={class:"flex gap-2"},ee=["onClick"],te={key:0,class:"text-center py-20"},se={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},ae={class:"text-slate-400"},oe={key:2,class:"space-y-4"},le={class:"flex flex-col lg:flex-row lg:items-start gap-4"},re={class:"flex-1 min-w-0"},ne={class:"flex items-center gap-3 mb-2"},ie={class:"text-white font-medium text-lg"},ce={class:"flex flex-wrap gap-4 text-sm text-slate-500 mb-4"},ue=["href"],de={key:0,class:"flex items-center gap-1"},me={key:1,class:"flex items-center gap-1"},pe={class:"text-slate-300 text-sm whitespace-pre-wrap"},fe={class:"text-slate-500 text-xs mt-4"},he={class:"flex lg:flex-col items-center gap-2"},ve=["value","onChange"],ge=["onClick"],Ve={__name:"contacts",setup(xe){const _=Q(),x=l([]),y=l(!0),c=l("all"),p=l(!1),f=l(null),b=l(null),h=l(""),v=l(""),g=l("success");H(()=>{k()});const m=l(1),w=l(0),P=l(10),k=async()=>{y.value=!0;try{const a=await $fetch("/api/contacts",{params:{page:m.value,limit:P.value,status:c.value,search:_.searchQuery}});x.value=a.data,w.value=a.meta.total}catch(a){console.error("Failed to fetch contacts:",a)}finally{y.value=!1}};U([m,c,()=>_.searchQuery],()=>{k()}),U([c,()=>_.searchQuery],()=>{m.value=1});const M=(a,o)=>{const u=a.target.value;N(o,u)},N=async(a,o)=>{try{await $fetch(`/api/contacts/${a}`,{method:"PUT",body:{status:o}});const u=x.value.find(C=>C.id===a);u&&(u.status=o),h.value="Updated",v.value="Status updated successfully.",g.value="success"}catch{h.value="Error",v.value="Failed to update status.",g.value="error"}b.value.show()},F=a=>{f.value=a,p.value=!0},L=async()=>{if(f.value)try{await $fetch(`/api/contacts/${f.value.id}`,{method:"DELETE"}),h.value="Deleted",v.value="Inquiry deleted.",g.value="success",k()}catch{h.value="Error",v.value="Failed to delete inquiry.",g.value="error"}finally{p.value=!1,f.value=null,b.value.show()}},R=a=>a?new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return(a,o)=>{const u=B,C=j,A=z;return r(),n("div",X,[t("div",Y,[o[2]||(o[2]=t("div",null,[t("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Contact Inquiries"),t("p",{class:"text-slate-400"},"View and manage messages from the public contact form.")],-1)),t("div",Z,[(r(),n(q,null,V(["all","new","in-progress","resolved"],e=>t("button",{key:e,onClick:D=>c.value=e,class:S(["px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-all",s(c)===e?"bg-indigo-600 text-white":"bg-white/5 text-slate-400 hover:text-white"])},i(e==="in-progress"?"In Progress":e),11,ee)),64))])]),s(y)?(r(),n("div",te,[...o[3]||(o[3]=[t("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),t("p",{class:"text-slate-500 mt-4"},"Loading inquiries...",-1)])])):s(x).length===0?(r(),n("div",se,[d(s(E),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t("p",ae,"No "+i(s(c)==="all"?"":s(c))+" inquiries found",1)])):(r(),n("div",oe,[(r(!0),n(q,null,V(s(x),e=>(r(),n("div",{key:e.id,class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 hover:border-indigo-500/30 transition-all"},[t("div",le,[t("div",re,[t("div",ne,[t("h3",ie,i(e.name),1),t("span",{class:S(["px-2 py-0.5 text-[10px] font-medium uppercase tracking-wider rounded-full",{"bg-rose-500/20 text-rose-400":e.status==="new","bg-amber-500/20 text-amber-400":e.status==="in-progress","bg-emerald-500/20 text-emerald-400":e.status==="resolved"}])},i(e.status),3)]),t("div",ce,[t("a",{href:`mailto:${e.email}`,class:"flex items-center gap-1 hover:text-indigo-400"},[d(s(E),{class:"w-4 h-4"}),$(" "+i(e.email),1)],8,ue),e.phone?(r(),n("span",de,[d(s(J),{class:"w-4 h-4"}),$(" "+i(e.phone),1)])):T("",!0),e.subject?(r(),n("span",me,[d(s(W),{class:"w-4 h-4"}),$(" "+i(e.subject),1)])):T("",!0)]),t("p",pe,i(e.message),1),t("p",fe," Received "+i(R(e.createdAt)),1)]),t("div",he,[t("select",{value:e.status,onChange:D=>M(D,e.id),class:"bg-slate-950 border border-white/10 rounded-lg text-sm text-slate-300 px-3 py-2 outline-none focus:border-indigo-500 transition-colors"},[...o[4]||(o[4]=[t("option",{value:"new"},"New",-1),t("option",{value:"in-progress"},"In Progress",-1),t("option",{value:"resolved"},"Resolved",-1)])],40,ve),t("button",{onClick:D=>F(e),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[d(s(O),{class:"w-4 h-4"})],8,ge)])])]))),128))])),s(w)>0?(r(),G(u,{key:3,"current-page":s(m),"onUpdate:currentPage":o[0]||(o[0]=e=>I(m)?m.value=e:null),total:s(w),"items-per-page":s(P)},null,8,["current-page","total","items-per-page"])):T("",!0),d(C,{modelValue:s(p),"onUpdate:modelValue":o[1]||(o[1]=e=>I(p)?p.value=e:null),title:"Delete Inquiry",description:`Are you sure you want to delete the inquiry from ${s(f)?.name}? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:L},null,8,["modelValue","description"]),d(A,{ref_key:"toastRef",ref:b,title:s(h),message:s(v),type:s(g)},null,8,["title","message","type"])])}}};export{Ve as default};
