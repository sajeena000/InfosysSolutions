import{_ as S}from"./Bch17VXu.js";import{_ as F}from"./B7zsFk_Y.js";import{M as D}from"./BS3QBk9h.js";import{P as L}from"./B5RdOoOI.js";import{c as P}from"./CSLnjY7V.js";import{T as R}from"./CwKXUYwU.js";import{r as l,C as j,j as z,c as r,a as t,b as d,F as T,m as $,n as s,t as n,y as A,o as i,x as q,k as V,d as b}from"./BAvuBg4s.js";import"./DlAUqK2U.js";import"./uoPWt5tl.js";import"./CJ2mP9ci.js";const B=P("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),H={class:"space-y-8"},G={class:"flex flex-col md:flex-row md:items-center justify-between gap-4"},J={class:"flex gap-2"},K=["onClick"],O={key:0,class:"text-center py-20"},Q={key:1,class:"text-center py-20 border border-dashed border-white/10 rounded-2xl"},W={class:"text-slate-400"},X={key:2,class:"space-y-4"},Y={class:"flex flex-col lg:flex-row lg:items-start gap-4"},Z={class:"flex-1 min-w-0"},ee={class:"flex items-center gap-3 mb-2"},te={class:"text-white font-medium text-lg"},se={class:"flex flex-wrap gap-4 text-sm text-slate-500 mb-4"},oe=["href"],ae={key:0,class:"flex items-center gap-1"},le={key:1,class:"flex items-center gap-1"},re={class:"text-slate-300 text-sm whitespace-pre-wrap"},ne={class:"text-slate-500 text-xs mt-4"},ie={class:"flex lg:flex-col items-center gap-2"},ce=["value","onChange"],de=["onClick"],we={__name:"contacts",setup(ue){const x=l([]),w=l(!0),u=l("all"),m=l(!1),p=l(null),_=l(null),f=l(""),h=l(""),v=l("success");j(()=>{k()});const k=async()=>{try{x.value=await $fetch("/api/contacts")}catch(o){console.error("Failed to fetch contacts:",o)}finally{w.value=!1}},C=z(()=>u.value==="all"?x.value:x.value.filter(o=>o.status===u.value)),U=(o,a)=>{const c=o.target.value;E(a,c)},E=async(o,a)=>{try{await $fetch(`/api/contacts/${o}`,{method:"PUT",body:{status:a}});const c=x.value.find(g=>g.id===o);c&&(c.status=a),f.value="Updated",h.value="Status updated successfully.",v.value="success"}catch{f.value="Error",h.value="Failed to update status.",v.value="error"}_.value.show()},I=o=>{p.value=o,m.value=!0},M=async()=>{if(p.value)try{await $fetch(`/api/contacts/${p.value.id}`,{method:"DELETE"}),f.value="Deleted",h.value="Inquiry deleted.",v.value="success",k()}catch{f.value="Error",h.value="Failed to delete inquiry.",v.value="error"}finally{m.value=!1,p.value=null,_.value.show()}},N=o=>o?new Date(o).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown";return(o,a)=>{const c=S,g=F;return i(),r("div",H,[t("div",G,[a[1]||(a[1]=t("div",null,[t("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Contact Inquiries"),t("p",{class:"text-slate-400"},"View and manage messages from the public contact form.")],-1)),t("div",J,[(i(),r(T,null,$(["all","new","in-progress","resolved"],e=>t("button",{key:e,onClick:y=>u.value=e,class:q(["px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-all",s(u)===e?"bg-indigo-600 text-white":"bg-white/5 text-slate-400 hover:text-white"])},n(e==="in-progress"?"In Progress":e),11,K)),64))])]),s(w)?(i(),r("div",O,[...a[2]||(a[2]=[t("div",{class:"w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin mx-auto"},null,-1),t("p",{class:"text-slate-500 mt-4"},"Loading inquiries...",-1)])])):s(C).length===0?(i(),r("div",Q,[d(s(D),{class:"w-12 h-12 text-slate-500 mx-auto mb-4"}),t("p",W,"No "+n(s(u)==="all"?"":s(u))+" inquiries found",1)])):(i(),r("div",X,[(i(!0),r(T,null,$(s(C),e=>(i(),r("div",{key:e.id,class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 hover:border-indigo-500/30 transition-all"},[t("div",Y,[t("div",Z,[t("div",ee,[t("h3",te,n(e.name),1),t("span",{class:q(["px-2 py-0.5 text-[10px] font-medium uppercase tracking-wider rounded-full",{"bg-rose-500/20 text-rose-400":e.status==="new","bg-amber-500/20 text-amber-400":e.status==="in-progress","bg-emerald-500/20 text-emerald-400":e.status==="resolved"}])},n(e.status),3)]),t("div",se,[t("a",{href:`mailto:${e.email}`,class:"flex items-center gap-1 hover:text-indigo-400"},[d(s(D),{class:"w-4 h-4"}),b(" "+n(e.email),1)],8,oe),e.phone?(i(),r("span",ae,[d(s(L),{class:"w-4 h-4"}),b(" "+n(e.phone),1)])):V("",!0),e.subject?(i(),r("span",le,[d(s(B),{class:"w-4 h-4"}),b(" "+n(e.subject),1)])):V("",!0)]),t("p",re,n(e.message),1),t("p",ne," Received "+n(N(e.createdAt)),1)]),t("div",ie,[t("select",{value:e.status,onChange:y=>U(y,e.id),class:"bg-slate-950 border border-white/10 rounded-lg text-sm text-slate-300 px-3 py-2 outline-none focus:border-indigo-500 transition-colors"},[...a[3]||(a[3]=[t("option",{value:"new"},"New",-1),t("option",{value:"in-progress"},"In Progress",-1),t("option",{value:"resolved"},"Resolved",-1)])],40,ce),t("button",{onClick:y=>I(e),class:"p-2 text-slate-400 hover:text-rose-500 hover:bg-rose-500/10 rounded-lg transition-colors",title:"Delete"},[d(s(R),{class:"w-4 h-4"})],8,de)])])]))),128))])),d(c,{modelValue:s(m),"onUpdate:modelValue":a[0]||(a[0]=e=>A(m)?m.value=e:null),title:"Delete Inquiry",description:`Are you sure you want to delete the inquiry from ${s(p)?.name}? This action cannot be undone.`,"confirm-text":"Delete",onConfirm:M},null,8,["modelValue","description"]),d(g,{ref_key:"toastRef",ref:_,title:s(f),message:s(h),type:s(v)},null,8,["title","message","type"])])}}};export{we as default};
