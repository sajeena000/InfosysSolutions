import{_ as C}from"./MLhvVykM.js";import{r as u,k as V,D as B,c as r,a as e,l as x,p as T,A as M,q as c,s as R,b as A,m as L,F as g,z as w,o as i,H as N,t as y,G as P,B as $}from"./B4XNpz0r.js";const z={class:"space-y-8"},F={class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 backdrop-blur-sm flex flex-col"},E={class:"flex items-center justify-between mb-6"},U={class:"h-64 w-full"},G={class:"mt-4 pt-4 border-t border-white/5"},I={class:"flex items-center justify-between mb-3"},K={key:0,class:"text-xs text-indigo-400"},O={key:1,class:"text-xs text-emerald-400"},q={class:"flex items-end justify-between gap-2"},H=["value","onBlur","placeholder"],X={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},J={class:"p-6 rounded-2xl bg-slate-900/40 border border-white/5 backdrop-blur-sm"},Q={class:"space-y-5"},W={class:"flex justify-between text-sm mb-1"},Y={class:"text-slate-300 font-medium"},Z={class:"text-slate-400"},ee={class:"h-2 w-full bg-slate-950 rounded-full overflow-hidden border border-white/5"},oe={__name:"analytics",setup(te){const _=[{name:"Direct",value:45,color:"bg-indigo-500"},{name:"Google Search",value:32,color:"bg-purple-500"},{name:"Twitter / X",value:15,color:"bg-sky-500"},{name:"Newsletter",value:8,color:"bg-emerald-500"}],a=u("7d"),b=u(!1),v=u(!1),p=u([35,45,30,60,75,50,65,80,70,45,90,60]),f=u([15,20,25,40,30,45,35,30,50,60,55,40]),k=async()=>{try{const l=await $fetch("/api/revenue");p.value=l["7d"],f.value=l["30d"]}catch(l){console.error("Failed to fetch revenue data:",l)}};V(()=>{k()});const h=B(()=>a.value==="7d"?p.value:f.value),j=async(l,t)=>{const d=Math.max(0,Math.min(100,parseInt(t)||0));a.value==="7d"?p.value[l]=d:f.value[l]=d,b.value=!0,v.value=!1;try{await $fetch("/api/revenue",{method:"POST",body:{period:a.value,dataIndex:l,value:d}}),v.value=!0,setTimeout(()=>{v.value=!1},2e3)}catch(s){console.error("Failed to save:",s)}finally{b.value=!1}},D=()=>{const l=["Data Point","Value"],t=h.value.map((m,S)=>[`Point ${S+1}`,m]),d=[l.join(","),...t.map(m=>m.join(","))].join(`
`),s=new Blob([d],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(s),o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download",`analytics_report_${a.value}.csv`),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)};return(l,t)=>{const d=C;return i(),r("div",z,[e("div",{class:"flex items-center justify-between"},[t[2]||(t[2]=e("div",null,[e("h1",{class:"text-3xl font-display font-bold text-white mb-2"},"Analytics"),e("p",{class:"text-slate-400"},"Traffic sources and user engagement.")],-1)),e("div",{class:"flex gap-2"},[e("button",{onClick:D,class:"px-4 py-2 bg-white/5 hover:bg-white/10 text-white rounded-lg text-sm font-medium border border-white/10 transition-colors"}," Download CSV ")])]),t[8]||(t[8]=x('<div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 relative overflow-hidden"><div class="absolute right-0 top-0 w-32 h-32 bg-indigo-500/10 rounded-full blur-2xl -mr-10 -mt-10"></div><p class="text-slate-400 text-sm mb-1">Page Views</p><p class="text-3xl font-display font-bold text-white">2.4M</p><div class="mt-4 h-1 w-full bg-slate-800 rounded-full overflow-hidden"><div class="h-full bg-indigo-500 w-[70%]"></div></div></div><div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 relative overflow-hidden"><div class="absolute right-0 top-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-2xl -mr-10 -mt-10"></div><p class="text-slate-400 text-sm mb-1">Avg. Duration</p><p class="text-3xl font-display font-bold text-white">4m 12s</p><div class="mt-4 h-1 w-full bg-slate-800 rounded-full overflow-hidden"><div class="h-full bg-emerald-500 w-[45%]"></div></div></div><div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 relative overflow-hidden"><div class="absolute right-0 top-0 w-32 h-32 bg-purple-500/10 rounded-full blur-2xl -mr-10 -mt-10"></div><p class="text-slate-400 text-sm mb-1">Conversion Rate</p><p class="text-3xl font-display font-bold text-white">3.8%</p><div class="mt-4 h-1 w-full bg-slate-800 rounded-full overflow-hidden"><div class="h-full bg-purple-500 w-[30%]"></div></div></div></div>',1)),e("div",F,[e("div",E,[t[4]||(t[4]=e("h2",{class:"text-lg font-display font-semibold text-white"},"Revenue Trends",-1)),T(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>R(a)?a.value=s:null),class:"bg-slate-950 border border-white/10 rounded-lg text-xs text-slate-400 px-3 py-1 outline-none focus:border-indigo-500 transition-colors cursor-pointer"},[...t[3]||(t[3]=[e("option",{value:"7d"},"Last 7 days",-1),e("option",{value:"30d"},"Last 30 days",-1)])],512),[[M,c(a)]])]),e("div",U,[A(d,{data:c(h)},null,8,["data"])]),e("div",G,[e("div",I,[t[5]||(t[5]=e("p",{class:"text-xs text-slate-500"},"Edit values (0-100%)",-1)),c(b)?(i(),r("span",K,"Saving...")):c(v)?(i(),r("span",O,"âœ“ Saved")):L("",!0)]),e("div",q,[(i(!0),r(g,null,w(c(h),(s,n)=>(i(),r("div",{key:n,class:"flex-1 flex flex-col items-center"},[e("input",{type:"number",value:s,onBlur:o=>j(n,o.target.value),onKeydown:t[1]||(t[1]=N(o=>{o.target.blur()},["enter"])),min:"0",max:"100",class:"w-full bg-slate-950 border border-white/10 rounded text-xs text-center text-slate-300 py-1 outline-none focus:border-indigo-500 transition-colors [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:n+1},null,40,H)]))),128))])])]),e("div",X,[e("div",J,[t[6]||(t[6]=e("h3",{class:"text-lg font-display font-semibold text-white mb-6"},"Top Referrers",-1)),e("div",Q,[(i(),r(g,null,w(_,s=>e("div",{key:s.name,class:"group"},[e("div",W,[e("span",Y,y(s.name),1),e("span",Z,y(s.value)+"%",1)]),e("div",ee,[e("div",{class:$(["h-full rounded-full transition-all duration-1000 group-hover:brightness-125",s.color]),style:P({width:s.value+"%"})},null,6)])])),64))])]),t[7]||(t[7]=x('<div class="p-6 rounded-2xl bg-slate-900/40 border border-white/5 backdrop-blur-sm"><h3 class="text-lg font-display font-semibold text-white mb-6">Device Breakdown</h3><div class="flex items-center gap-4 mb-8"><div class="flex-1 h-32 bg-slate-950 rounded-xl border border-white/5 flex items-end justify-center pb-0 overflow-hidden relative group"><div class="w-12 bg-indigo-500/80 h-[60%] rounded-t-lg group-hover:h-[65%] transition-all"></div><span class="absolute bottom-2 text-xs text-white">Mobile</span></div><div class="flex-1 h-32 bg-slate-950 rounded-xl border border-white/5 flex items-end justify-center pb-0 overflow-hidden relative group"><div class="w-12 bg-purple-500/80 h-[80%] rounded-t-lg group-hover:h-[85%] transition-all"></div><span class="absolute bottom-2 text-xs text-white">Desktop</span></div><div class="flex-1 h-32 bg-slate-950 rounded-xl border border-white/5 flex items-end justify-center pb-0 overflow-hidden relative group"><div class="w-12 bg-emerald-500/80 h-[20%] rounded-t-lg group-hover:h-[25%] transition-all"></div><span class="absolute bottom-2 text-xs text-white">Tablet</span></div></div><p class="text-sm text-slate-400"> Desktop traffic is performing 25% better than mobile this week. Consider optimizing mobile checkout flow. </p></div>',1))])])}}};export{oe as default};
